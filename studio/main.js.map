{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"Studio.libraries['react']\"","webpack:///external \"Studio\"","webpack:///./studio/ShowColor.js","webpack:///external \"Studio.libraries['prop-types']\"","webpack:///./studio/emitter.js","webpack:///./studio/findTagInSet.js","webpack:///./studio/organizeState.js","webpack:///./studio/ColorPickerTrigger.js","webpack:///./studio/simpleCheckForValidColor.js","webpack:///./studio/colorLuminance.js","webpack:///./studio/TagEntityTreeButtonToolbar.scss","webpack:///./studio/main_dev.js","webpack:///./studio/NewTagModal.js","webpack:///./studio/ColorPicker/index.js","webpack:///./studio/ColorPicker/ColorWrap.js","webpack:///./node_modules/lodash.debounce/index.js","webpack:///(webpack)/buildin/global.js","webpack:///./studio/ColorPicker/Picker.js","webpack:///./studio/ColorPicker/utils/handleHover.js","webpack:///./studio/ColorPicker/Swatch.js","webpack:///./studio/TagEditor.js","webpack:///./studio/TagProperties.js","webpack:///./studio/EntityTagProperties.js","webpack:///./studio/EntityTreeTagOrganizer.js","webpack:///./node_modules/mitt/dist/mitt.es.js","webpack:///./shared/reservedTagNames.js","webpack:///./studio/TagEntityTreeOrganizeButtonToolbar.js","webpack:///./studio/TagEntityTreeFilterButtonToolbar.js","webpack:///./studio/TagEntityTreeFilterByTags.js","webpack:///external \"Studio.libraries['react-list']\"","webpack:///./studio/getColorLuminance.js","webpack:///./studio/hexToRgb.js","webpack:///./studio/TagEntityTreeFilterByTags.scss","webpack:///./studio/TagEntityTreeItem.js","webpack:///./studio/TagEntityTreeTagGroupItem.js","webpack:///./studio/filterItemWithTagsStrategy.js"],"names":["ShowColor","props","color","height","width","borderColor","currentColor","backgroundColor","borderWidth","borderStyle","display","verticalAlign","propTypes","PropTypes","string","isRequired","number","emitter","tagSet","tagShortId","tag","found","some","tagInSet","shortid","undefined","current","filterTags","ColorPicketTrigger","displayColorPicker","containerStyles","onClickColorTrigger","onInputChange","onChangeSelectionColor","onCloseColorPicker","translateXColorPickerFromTrigger","translateYColorPickerFromTrigger","containerTriggerPickerStyles","padding","defaultContainerStyles","currentContainerStyles","Object","assign","colorPickerContainerStyles","transformValue","transform","ev","target","value","hex","bool","object","func","HEX_COLOR_REGEXP","simpleCheckForValidColor","test","lum","selectedLum","selectedHex","String","replace","length","rgb","c","i","parseInt","substr","Math","round","min","max","toString","organizeState","Studio","addEntitySet","name","faIcon","visibleName","onNew","options","openModal","NewTagModal","helpUrl","referenceAttributes","entityTreePosition","initializeListeners","push","keys","entitySets","forEach","entitySetName","entitySet","indexOf","on","organizationMode","selectedTags","addEditorComponent","TagEditor","addPropertiesComponent","TagProperties","title","entity","__entitySet","EntityTagProperties","addEntityTreeWrapperComponent","EntityTreeTagOrganizer","addEntityTreeToolbarComponent","TagEntityTreeFilterButtonToolbar","TagEntityTreeOrganizeButtonToolbar","addEntityTreeItemComponent","TagEntityTreeItem","TagEntityTreeTagGroupItem","entityTreeFilterItemResolvers","filterItemWithTagsStrategy","state","selectedColor","error","setTimeout","refs","focus","e","key","createTag","setState","defaults","description","api","post","data","response","addExistingEntity","openTab","close","message","handleKeyPress","border","colorInputValue","colorHex","resize","opacity","Component","Picker","colorToState","ColorWrap","ColorPicker","visible","debounce","fn","event","handleChange","bind","isValidColor","colors","onChangeComplete","onChange","PureComponent","defaultProps","PickerSwatch","hover","onClick","styles","swatch","position","zIndex","outline","boxShadow","triangle","card","background","borderRadius","flexWrap","source","map","handleHover","Span","handleMouseOver","handleMouseOut","React","Swatch","style","cursor","handleClick","entities","_id","v","EntityRefSelect","selectValues","selected","tags","removeInvalidTagReferences","updatedTags","filter","t","k","references","getNameAndColor","foundTags","tg","getSelectedTags","tIndex","allSelectTags","marginRight","require","noTagGroupName","tagsGroupName","organizeByDefault","extensions","organizeByTags","onOrganizationModeChange","off","organizeByTag","newItems","entitySetsNames","allTagEntities","currentTagEntities","entitiesByTagAndType","entitiesByTypeWithoutTag","getEntityTypeNameAttr","tagsWithNoEntities","tagName","entitiesByType","typesInTag","every","type","tagItem","typeItem","isGroup","items","isEntitySet","noTagsItem","item","tagsItem","collection","tagFound","getReferences","entityTag","groupEntityByTagAndType","entitiesInSet","entitiesInSetCount","j","addItemsByTag","cloneElement","children","renderDefaultTree","renderTree","getSetsToRender","groupEntitiesByTag","reservedTagNames","module","exports","default","handleOrganizationModeChange","stopPropagation","emit","closeMenu","active","showFilter","openFilter","closeFilter","handleTagSelectChange","setFilter","allTags","isActive","TagEntityTreeFilterByTags","showTagsList","filterText","createRenderer","addSelectedTag","onTagSelectionClick","onChangeInputTag","onKeyDownInputTag","onRemoveTagItem","index","renderTagItem","previousSelectedTags","onTagSelectChange","tagSelectionInput","filterPass","foundInSelectedTags","selectTag","tagSelection","defaultPrevented","keyCode","inputTag","remove","enterKey","removeKey","preventDefault","onFilterClose","selectedTagsLastIndex","tagIndex","originalSelectedTags","slice","tagsListItem","tagsToShowInList","getTagsToShow","stylesForTagsList","stylesForInputTag","searchTagsContainer","searchTagsInputBox","tagsSelect","tagStyles","tagsSelectItem","tagsSelectItemRemove","searchTags","tagsListContainer","tagsList","tagsListEmpty","arrayOf","shape","RsRGB","GsRGB","BsRGB","R","G","B","r","g","b","pow","shorthandRegex","fullHex","m","result","exec","tagsLength","marginLeft","filterInfo","allTagsInEntity","tagInEntity"],"mappings":"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EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,WAAW,OAAO,YAAY;AAC9B,WAAW,QAAQ;AACnB;AACA,WAAW,OAAO;AAClB;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,8CAA8C,kBAAkB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACxXA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;;;;;AClBA;;;;AACA;;;;;;AAEA,IAAMc,eAAe,2BAAY,gBAA+B;AAAA,MAA5BC,KAA4B,QAA5BA,KAA4B;AAAA,MAArB5J,KAAqB,QAArBA,KAAqB;AAAA,MAAd6J,OAAc,QAAdA,OAAc;;AAC9D,MAAMC,SAAS;AACbC,YAAQ;AACN7J,aAAO,MADD;AAEND,cAAQ;AAFF;AADK,GAAf;;AAOA,MAAI2J,KAAJ,EAAW;AACTE,WAAOC,MAAP,gBACKD,OAAOC,MADZ;AAEEC,gBAAU,UAFZ;AAGEC,cAAQ,GAHV;AAIEC,eAAS,gBAJX;AAKEC,iBAAW;AALb;AAOD;;AAED,SACE;AAAA;AAAA,MAAK,OAAOL,OAAOC,MAAnB;AACE,wBAAC,gBAAD,IAAQ,OAAO/J,KAAf,EAAsB,SAAS6J,OAA/B;AADF,GADF;AAKD,CAvBoB,CAArB;;AAyBA,IAAMlB,SAAS,SAATA,MAAS,QAA2C;AAAA,MAAxCzI,KAAwC,SAAxCA,KAAwC;AAAA,MAAjCoJ,MAAiC,SAAjCA,MAAiC;AAAA,MAAzBE,QAAyB,SAAzBA,QAAyB;AAAA,MAAfY,QAAe,SAAfA,QAAe;;AACxD,MAAMN,SAAS;AACbO,UAAM;AACJnK,kBADI;AAEJoK,kBAAY,MAFR;AAGJjC,cAAQ,2BAHJ;AAIJ8B,iBAAW,6BAJP;AAKJI,oBAAc,KALV;AAMJP,gBAAU,UANN;AAOJ5H,eAAS,KAPL;AAQJ5B,eAAS,MARL;AASJgK,gBAAU;AATN;AADO,GAAf;AAaA,MAAMrB,eAAe,SAAfA,YAAe,CAACpG,GAAD,EAAMuE,CAAN;AAAA,WAAYkC,SAAS,EAAEzG,QAAF,EAAO0H,QAAQ,KAAf,EAAT,EAAiCnD,CAAjC,CAAZ;AAAA,GAArB;;AAEA,SACE;AAAA;AAAA,MAAK,OAAOwC,OAAOO,IAAnB;AACGf,WAAOoB,GAAP,CAAW,UAAC7G,CAAD;AAAA,aACV,oBAAC,YAAD,IAAc,OAAOA,CAArB,EAAwB,KAAKA,CAA7B,EAAgC,SAASsF,YAAzC,GADU;AAAA,KAAX;AADH,GADF;AAOD,CAvBD;;AAyBAR,OAAOe,YAAP,GAAsB;AACpBxJ,SAAO,OADa;AAEpBoJ,UAAQ,CACN,SADM,EACK,SADL,EACgB,SADhB,EAC2B,SAD3B,EACsC,SADtC,EAEN,SAFM,EAEK,SAFL,EAEgB,SAFhB,EAE2B,SAF3B,EAEsC,SAFtC,EAGN,SAHM,EAGK,SAHL,EAGgB,SAHhB,EAG2B,SAH3B;AAFY,CAAtB;;kBASeX,M;;;;;;;;;;;;;;;;;AC/Df;;;;;;;;;;;;AAEA,IAAMgC,cAAc,SAAdA,WAAc,CAACjC,SAAD,EAA8B;AAAA,MAAlBkC,IAAkB,uEAAX,MAAW;;AAChD;AAAA;;AACE,mBAAa7K,KAAb,EAAoB;AAAA;;AAAA,gHACZA,KADY;;AAGlB,YAAKiH,KAAL,GAAa,EAAE4C,OAAO,KAAT,EAAb;;AAEA,YAAKiB,eAAL,GAAuB,MAAKA,eAAL,CAAqBzB,IAArB,OAAvB;AACA,YAAK0B,cAAL,GAAsB,MAAKA,cAAL,CAAoB1B,IAApB,OAAtB;AANkB;AAOnB;;AARH;AAAA;AAAA,wCAUqB;AACjB,aAAK3B,QAAL,CAAc,EAAEmC,OAAO,IAAT,EAAd;AACD;AAZH;AAAA;AAAA,uCAaoB;AAChB,aAAKnC,QAAL,CAAc,EAAEmC,OAAO,KAAT,EAAd;AACD;AAfH;AAAA;AAAA,+BAiBY;AACR,eAAO;AAAC,cAAD;AAAA,YAAM,aAAa,KAAKiB,eAAxB,EAAyC,YAAY,KAAKC,cAA1D;AACL,wCAAC,SAAD,eAAe,KAAK/K,KAApB,EAA+B,KAAKiH,KAApC;AADK,SAAP;AAGD;AArBH;;AAAA;AAAA,IAA2B+D,gBAAMrC,SAAjC;AAuBD,CAxBD;;kBA0BeiC,W;;;;;;;;;;;;;AC3Bf,IAAMK,SAAS,SAATA,MAAS,OAA8C;AAAA,MAA3ChL,KAA2C,QAA3CA,KAA2C;AAAA,MAApCiL,KAAoC,QAApCA,KAAoC;AAAA,MAA7BpB,OAA6B,QAA7BA,OAA6B;AAAA,wBAApB3D,KAAoB;AAAA,MAApBA,KAAoB,8BAAZlG,KAAY;;AAC3D,MAAM8J,SAAS;AACbC,YAAQ;AACNO,kBAAYtK,KADN;AAENC,cAAQ,MAFF;AAGNC,aAAO,MAHD;AAINgL,cAAQ;AAJF;AADK,GAAf;;AASA,MAAMC,cAAc,SAAdA,WAAc,CAAC7D,CAAD;AAAA,WAAOuC,QAAQ7J,KAAR,EAAesH,CAAf,CAAP;AAAA,GAApB;;AAEA,SACE,6BAAK,OAAOwC,OAAOC,MAAnB,EAA2B,SAASoB,WAApC,EAAiD,OAAOjF,KAAxD,GADF;AAGD,CAfD;;kBAiBe8E,M;;;;;;;;;;;;;;;AClBf;;;;AACA;;;;AACA;;;;;;;;;;;;IAEqBjF,S;;;;;;;;;;;6BACT;AAAA,UACAI,MADA,GACW,KAAKpG,KADhB,CACAoG,MADA;;;AAGR,UAAIwB,oBAAJ;;AAEA,UAAIxB,OAAOwB,WAAX,EAAwB;AACtBA,sBAAcxB,OAAOwB,WAArB;AACD,OAFD,MAEO;AACLA,sBAAc;AAAA;AAAA;AAAI;AAAJ,SAAd;AACD;;AAED,aACE;AAAA;AAAA,UAAK,WAAU,eAAf;AACE;AAAA;AAAA;AACE;AAAA;AAAA;AAAI,iDAAG,WAAU,WAAb,GAAJ;AAAA;AAAiCxB,mBAAO1B;AAAxC;AADF,SADF;AAIE;AAAA;AAAA;AAAA;AACe,mDADf;AAEE;AAAA;AAAA;AAAIkD;AAAJ;AAFF,SAJF;AAQE;AAAA;AAAA;AAAA;AACS,wCAAC,mBAAD,IAAW,OAAOxB,OAAOnG,KAAzB;AADT;AARF,OADF;AAcD;;;;EA1BoC0I,gB;;kBAAlB3C,S;;;AA6BrBA,UAAUrF,SAAV,GAAsB;AACpByF,UAAQxF,oBAAUsC,MAAV,CAAiBpC;AADL,CAAtB,C;;;;;;;;;;;;;;;ACjCA;;;;AACA;;;;AACA;;;;;;;;;;;;IAEqBoF,a;;;;;0BACLE,M,EAAQiF,Q,EAAU;AAC9B,aACE;AAAA;AAAA;AACE;AAAA;AAAA;AAAA;AACe,wCAAC,mBAAD,IAAW,OAAOjF,OAAOnG,KAAzB,EAAgC,OAAO,EAAvC,EAA2C,QAAQ,EAAnD,GADf;AAAA;AAAA;AADF,OADF;AAOD;;;AAED,yBAAaD,KAAb,EAAoB;AAAA;;AAAA,8HACZA,KADY;;AAGlB,UAAKiH,KAAL,GAAa;AACXrF,0BAAoB;AADT,KAAb;AAHkB;AAMnB;;;;6BAES;AAAA;;AAAA,UACAA,kBADA,GACuB,KAAKqF,KAD5B,CACArF,kBADA;AAAA,mBAEqB,KAAK5B,KAF1B;AAAA,UAEAoG,MAFA,UAEAA,MAFA;AAAA,UAEQqD,SAFR,UAEQA,QAFR;;;AAIR,aACE;AAAA;AAAA,UAAK,WAAU,oBAAf;AACE;AAAA;AAAA,YAAK,WAAU,YAAf;AACE;AAAA;AAAA;AAAA;AAAA,WADF;AAGE;AAAA;AAAA;AACE,0CAAC,4BAAD;AACE,kCAAoB7H,kBADtB;AAEE,+BAAiB,EAAE0G,QAAQ,iBAAV,EAFnB;AAGE,qBAAOlC,OAAOnG,KAHhB;AAIE,mCAAqB;AAAA,uBAAM,OAAKyH,QAAL,CAAc,EAAE9F,oBAAoB,IAAtB,EAAd,CAAN;AAAA,eAJvB;AAKE,kCAAoB;AAAA,uBAAM,OAAK8F,QAAL,CAAc,EAAE9F,oBAAoB,KAAtB,EAAd,CAAN;AAAA,eALtB;AAME,6BAAe,uBAAC2G,eAAD;AAAA,uBAAqBA,oBAAoBnC,OAAOnG,KAA3B,IAAoCwJ,UAAS,EAAE6B,KAAKlF,OAAOkF,GAAd,EAAmBrL,OAAOsI,eAA1B,EAAT,CAAzD;AAAA,eANjB;AAOE,sCAAwB,gCAACC,QAAD;AAAA,uBAAciB,UAAS,EAAE6B,KAAKlF,OAAOkF,GAAd,EAAmBrL,OAAOuI,QAA1B,EAAT,CAAd;AAAA;AAP1B;AADF;AAHF,SADF;AAgBE;AAAA;AAAA,YAAK,WAAU,YAAf;AACE;AAAA;AAAA;AAAA;AAAA,WADF;AAEE;AACE,kBAAK,GADP;AAEE,mBAAO,EAAEC,QAAQ,UAAV,EAFT;AAGE,mBAAOrC,OAAOwB,WAAP,IAAsB,EAH/B;AAIE,sBAAU,kBAAC2D,CAAD;AAAA,qBAAO9B,UAAS,EAAE6B,KAAKlF,OAAOkF,GAAd,EAAmB1D,aAAa2D,EAAEzI,MAAF,CAASC,KAAzC,EAAT,CAAP;AAAA;AAJZ;AAFF;AAhBF,OADF;AA4BD;;;;EAnDwC4F,gB;;kBAAtBzC,a;;;;;;;;;;;;;;;;;ACJrB;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA,IAAMsF,kBAAkBhH,yBAAOgH,eAA/B;;AAEA,IAAMC,eAAe,SAAfA,YAAe,CAACC,QAAD,EAAc;AACjC,MAAMC,OAAOD,SAASf,GAAT,CAAa,UAACY,CAAD,EAAO;AAC/B,WAAO,EAAEhK,SAASgK,EAAEhK,OAAb,EAAP;AACD,GAFY,CAAb;;AAIA,SAAOoK,IAAP;AACD,CAND;;IAQqBrF,mB;;;;;;;;;;;wCAwCE;AACnB,WAAKsF,0BAAL;AACD;;;yCAEqB;AACpB,WAAKA,0BAAL;AACD;;;iDAE6B;AAAA,mBACW,KAAK5L,KADhB;AAAA,UACpBoG,MADoB,UACpBA,MADoB;AAAA,UACZiF,QADY,UACZA,QADY;AAAA,UACF5B,QADE,UACFA,QADE;;;AAG5B,UAAI,CAACrD,OAAOuF,IAAZ,EAAkB;AAChB;AACD;;AAED,UAAME,cAAczF,OAAOuF,IAAP,CAAYG,MAAZ,CAAmB,UAACC,CAAD;AAAA,eAAOvJ,OAAO8C,IAAP,CAAY+F,QAAZ,EAAsBS,MAAtB,CAA6B,UAACE,CAAD;AAAA,iBAAOX,SAASW,CAAT,EAAY3F,WAAZ,KAA4B,MAA5B,IAAsCgF,SAASW,CAAT,EAAYzK,OAAZ,KAAwBwK,EAAExK,OAAvE;AAAA,SAA7B,EAA6GqC,MAApH;AAAA,OAAnB,CAApB;;AAEA,UAAIiI,YAAYjI,MAAZ,KAAuBwC,OAAOuF,IAAP,CAAY/H,MAAvC,EAA+C;AAC7C6F,iBAAS,EAAE6B,KAAKlF,OAAOkF,GAAd,EAAmBK,MAAME,WAAzB,EAAT;AACD;AACF;;;6BAES;AAAA,oBACqB,KAAK7L,KAD1B;AAAA,UACAoG,MADA,WACAA,MADA;AAAA,UACQqD,SADR,WACQA,QADR;;;AAGR,aACE;AAAA;AAAA,UAAK,WAAU,oBAAf;AACE;AAAA;AAAA,YAAK,WAAU,YAAf;AACE,wCAAC,eAAD;AACE,0BAAa,aADf;AAEE,oBAAQ,gBAACwC,UAAD;AAAA,qBAAiB,EAAEN,MAAMM,WAAWN,IAAnB,EAAjB;AAAA,aAFV;AAGE,mBAAOvF,OAAOuF,IAAP,GAAcvF,OAAOuF,IAAP,CAAYhB,GAAZ,CAAgB,UAACoB,CAAD;AAAA,qBAAOA,EAAExK,OAAT;AAAA,aAAhB,CAAd,GAAkD,EAH3D;AAIE,sBAAU,kBAACmK,QAAD;AAAA,qBAAcjC,UAAS,EAAE6B,KAAKlF,OAAOkF,GAAd,EAAmBK,MAAMF,aAAaC,QAAb,CAAzB,EAAT,CAAd;AAAA,aAJZ;AAKE;AALF;AADF;AADF,OADF;AAaD;;;oCA7EuBtF,M,EAAQiF,Q,EAAU;AACxC,UAAMa,kBAAkB,SAAlBA,eAAkB,CAACH,CAAD,EAAO;AAC7B,YAAMI,YAAY3J,OAAO8C,IAAP,CAAY+F,QAAZ,EAAsBV,GAAtB,CAA0B,UAACqB,CAAD;AAAA,iBAAOX,SAASW,CAAT,CAAP;AAAA,SAA1B,EAA8CF,MAA9C,CAAqD,UAACM,EAAD;AAAA,iBAAQA,GAAG7K,OAAH,KAAewK,EAAExK,OAAzB;AAAA,SAArD,CAAlB;;AAEA,eAAO4K,UAAUvI,MAAV,GAAmB,EAAEc,MAAMyH,UAAU,CAAV,EAAazH,IAArB,EAA2BzE,OAAOkM,UAAU,CAAV,EAAalM,KAA/C,EAAnB,GAA4E,EAAEyE,MAAM,EAAR,EAAYzE,OAAOuB,SAAnB,EAAnF;AACD,OAJD;;AAMA,aAAO,CAAC4E,OAAOuF,IAAP,IAAe,EAAhB,EAAoBhB,GAApB,CAAwB,UAACoB,CAAD;AAAA,4BAC1BA,CAD0B,EAE1BG,gBAAgBH,CAAhB,CAF0B;AAAA,OAAxB,CAAP;AAID;;;0BAEa3F,M,EAAQiF,Q,EAAU;AAC9B,UAAI,CAACjF,OAAOuF,IAAR,IAAgB,CAACvF,OAAOuF,IAAP,CAAY/H,MAAjC,EAAyC;AACvC,eAAO,MAAP;AACD;;AAED,aACE;AAAA;AAAA;AAAA;AAEE;AAAA;AAAA;AAEI0C,8BAAoB+F,eAApB,CAAoCjG,MAApC,EAA4CiF,QAA5C,EAAsDV,GAAtD,CAA0D,UAACoB,CAAD,EAAIO,MAAJ,EAAYC,aAAZ,EAA8B;AACtF,mBACE;AAAA;AAAA,gBAAM,KAAKR,EAAErH,IAAb,EAAmB,OAAO,EAAEjE,SAAS,cAAX,EAA2B+L,aAAa,KAAxC,EAA1B;AACE,4CAAC,mBAAD,IAAW,OAAOT,EAAE9L,KAApB,EAA2B,OAAO,EAAlC,EAAsC,QAAQ,EAA9C,GADF;AAAA;AAGG8L,gBAAErH,IAHL;AAIG4H,yBAAWC,cAAc3I,MAAd,GAAuB,CAAlC,GAAsC,EAAtC,GAA2C;AAJ9C,aADF;AAQD,WATD;AAFJ;AAFF,OADF;AAmBD;;;;EAtC8C+E,gB;;kBAA5BrC,mB;;;;;;;;;;;;;;;ACdrB;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;eAE0CmG,mBAAOA,CAAC,EAAR,C;IAAlCC,c,YAAAA,c;IAAgBC,a,YAAAA,a;;IAElBnG,sB;;;AACJ,oCAAe;AAAA;;AAAA;;AAGb,QAAIoG,oBAAoBpI,yBAAOqI,UAAP,CAAkB,MAAlB,EAA0B/H,OAA1B,CAAkC8H,iBAA1D;;AAEA,QAAIA,qBAAqB,IAAzB,EAA+B;AAC7BA,0BAAoB,KAApB;AACD;;AAED,UAAK3F,KAAL,GAAa;AACX6F,sBAAgBF;AADL,KAAb;;AAIA,UAAKG,wBAAL,GAAgC,MAAKA,wBAAL,CAA8B1D,IAA9B,OAAhC;AAba;AAcd;;;;wCAEoB;AACnBrI,wBAAQ4E,EAAR,CAAW,+BAAX,EAA4C,KAAKmH,wBAAjD;AACD;;;2CAEuB;AACtB/L,wBAAQgM,GAAR,CAAY,+BAAZ,EAA6C,KAAKD,wBAAlD;AACD;;;6CAEyBE,a,EAAe;AACvC,WAAKvF,QAAL,CAAc;AACZoF,wBAAgBG;AADJ,OAAd;AAGD;;;kCAGCC,Q,EACAC,e,EACAC,c,EACAC,kB,EACAC,oB,EACAC,wB,EACAC,qB,EACA;AACA,UAAMC,qBAAqB,EAA3B;;AAEAL,qBAAe5H,OAAf,CAAuB,UAACrE,GAAD,EAAS;AAC9B,YAAMuM,UAAUF,sBAAsBrM,IAAIkF,WAA1B,EAAuClF,GAAvC,CAAhB;AACA,YAAMwM,iBAAiBL,qBAAqBI,OAArB,CAAvB;AACA,YAAME,aAAapL,OAAO8C,IAAP,CAAYqI,cAAZ,CAAnB;;AAEA,YACEC,WAAWhK,MAAX,KAAsB,CAAtB,IACAgK,WAAWC,KAAX,CAAiB,UAACC,IAAD;AAAA,iBAAUH,eAAeG,IAAf,EAAqBlK,MAArB,GAA8B,CAAxC;AAAA,SAAjB,MAAgE,KAFlE,EAGE;AACA6J,6BAAmBpI,IAAnB,CAAwBlE,GAAxB;AACA;AACD;;AAED,YAAI4M,gBAAJ;;AAEAZ,wBAAgB3H,OAAhB,CAAwB,UAACsI,IAAD,EAAU;AAChC,cAAIA,SAAS,MAAb,EAAqB;AACnB;AACD;;AAED,cAAMzC,WAAWsC,eAAeG,IAAf,CAAjB;AACA,cAAIE,iBAAJ;;AAEA,cAAI,CAACD,OAAL,EAAc;AACZA,sBAAU;AACRrJ,oBAAMgJ,OADE;AAERO,uBAAS,IAFD;AAGRlG,oBAAM5G,GAHE;AAIR+M,qBAAO;AAJC,aAAV;;AAOAhB,qBAAS7H,IAAT,CAAc0I,OAAd;AACD;;AAED,cAAI,CAAC1C,QAAD,IAAaA,SAASzH,MAAT,KAAoB,CAArC,EAAwC;AACtCmK,oBAAQG,KAAR,CAAc7I,IAAd,CAAmB;AACjBX,oBAAMoJ,IADW;AAEjBK,2BAAa,IAFI;AAGjBD,qBAAO;AAHU,aAAnB;;AAMA;AACD;;AAEDF,qBAAW;AACTtJ,kBAAMoJ,IADG;AAETK,yBAAa,IAFJ;AAGTD,mBAAO;AAHE,WAAX;;AAMA7C,mBAAS7F,OAAT,CAAiB,UAACY,MAAD,EAAY;AAC3B4H,qBAASE,KAAT,CAAe7I,IAAf,CAAoB;AAClBX,oBAAM8I,sBAAsBpH,OAAOC,WAA7B,EAA0CD,MAA1C,CADY;AAElB2B,oBAAM3B;AAFY,aAApB;AAID,WALD;;AAOA2H,kBAAQG,KAAR,CAAc7I,IAAd,CAAmB2I,QAAnB;AACD,SA3CD;AA4CD,OA3DD;;AA6DAP,yBAAmBjI,OAAnB,CAA2B,UAACrE,GAAD,EAAS;AAClC,YAAM4M,UAAU;AACdrJ,gBAAM8I,sBAAsBrM,IAAIkF,WAA1B,EAAuClF,GAAvC,CADQ;AAEd8M,mBAAS,IAFK;AAGdlG,gBAAM5G,GAHQ;AAId+M,iBAAO;AAJO,SAAhB;;AAOAf,wBAAgB3H,OAAhB,CAAwB,UAACsI,IAAD,EAAU;AAChC,cAAIA,SAAS,MAAb,EAAqB;AACnB;AACD;;AAEDC,kBAAQG,KAAR,CAAc7I,IAAd,CAAmB;AACjBX,kBAAMoJ,IADW;AAEjBK,yBAAa,IAFI;AAGjBD,mBAAO;AAHU,WAAnB;AAKD,SAVD;;AAYAhB,iBAAS7H,IAAT,CAAc0I,OAAd;AACD,OArBD;;AAuBA,UAAMK,aAAa;AACjB1J,cAAMgI,cADW;AAEjBuB,iBAAS,IAFQ;AAGjBC,eAAO;AAHU,OAAnB;;AAMAf,sBAAgB3H,OAAhB,CAAwB,UAACsI,IAAD,EAAU;AAChC,YAAIA,SAAS,MAAb,EAAqB;AACnB;AACD;;AAED,YAAMO,OAAO;AACX3J,gBAAMoJ,IADK;AAEXK,uBAAa,IAFF;AAGXD,iBAAO;AAHI,SAAb;;AAMA,YAAM7C,WAAWkC,yBAAyBO,IAAzB,CAAjB;;AAEA,YAAIzC,QAAJ,EAAc;AACZA,mBAAS7F,OAAT,CAAiB,UAACY,MAAD,EAAY;AAC3BiI,iBAAKH,KAAL,CAAW7I,IAAX,CAAgB;AACdX,oBAAM8I,sBAAsBpH,OAAOC,WAA7B,EAA0CD,MAA1C,CADQ;AAEd2B,oBAAM3B;AAFQ,aAAhB;AAID,WALD;AAMD;;AAEDgI,mBAAWF,KAAX,CAAiB7I,IAAjB,CAAsBgJ,IAAtB;AACD,OAvBD;;AAyBAnB,eAAS7H,IAAT,CAAc+I,UAAd;;AAEA,UAAME,WAAW;AACf5J,cAAMiI,aADS;AAEfwB,qBAAa,IAFE;AAGfD,eAAO;AAHQ,OAAjB;;AAMA,UAAIb,kBAAJ,EAAwB;AACtBA,2BAAmB7H,OAAnB,CAA2B,UAACrE,GAAD,EAAS;AAClCmN,mBAASJ,KAAT,CAAe7I,IAAf,CAAoB;AAClBX,kBAAM8I,sBAAsBrM,IAAIkF,WAA1B,EAAuClF,GAAvC,CADY;AAElB4G,kBAAM5G;AAFY,WAApB;AAID,SALD;AAMD;;AAED+L,eAAS7H,IAAT,CAAciJ,QAAd;AACD;;;4CAEwBC,U,EAAYnB,c,EAAgBhH,M,EAAQoH,qB,EAAuB;AAClF,UAAIpH,OAAOC,WAAP,KAAuB,MAA3B,EAAmC;AACjC,YAAM3B,OAAO8I,sBAAsBpH,OAAOC,WAA7B,EAA0CD,MAA1C,CAAb;AACAmI,mBAAW7J,IAAX,IAAmB6J,WAAW7J,IAAX,KAAoB,EAAvC;AACD,OAHD,MAGO,IAAI0B,OAAOuF,IAAP,IAAe,IAAnB,EAAyB;AAC9BvF,eAAOuF,IAAP,CAAYnG,OAAZ,CAAoB,UAACrE,GAAD,EAAS;AAC3B,cAAMqN,WAAW,4BAAapB,cAAb,EAA6BjM,IAAII,OAAjC,CAAjB;;AAEA,cAAIiN,QAAJ,EAAc;AACZ,gBAAM9J,QAAO8I,sBAAsBgB,SAASnI,WAA/B,EAA4CmI,QAA5C,CAAb;AACAD,uBAAW7J,KAAX,IAAmB6J,WAAW7J,KAAX,KAAoB,EAAvC;AACA6J,uBAAW7J,KAAX,EAAiB0B,OAAOC,WAAxB,IAAuCkI,WAAW7J,KAAX,EAAiB0B,OAAOC,WAAxB,KAAwC,EAA/E;AACAkI,uBAAW7J,KAAX,EAAiB0B,OAAOC,WAAxB,EAAqChB,IAArC,CAA0Ce,MAA1C;AACD;AACF,SATD;AAUD;AACF;;;uCAEmB+G,e,EAAiB9B,Q,EAAUmC,qB,EAAuB;AAAA;;AACpE,UAAMN,WAAW,EAAjB;AACA,UAAIE,iBAAiB5I,yBAAOiK,aAAP,GAAuB9C,IAAvB,IAA+B,EAApD;AACA,UAAM2B,uBAAuB,EAA7B;AACA,UAAMC,2BAA2B,EAAjC;;AAEA;AACAH,qBAAe5H,OAAf,CAAuB,UAACkJ,SAAD,EAAe;AACpC,eAAKC,uBAAL,CAA6BrB,oBAA7B,EAAmDF,cAAnD,EAAmEsB,SAAnE,EAA8ElB,qBAA9E;AACD,OAFD;;AAIAL,sBAAgB3H,OAAhB,CAAwB,UAACC,aAAD,EAAmB;AACzC,YAAIA,kBAAkB,MAAtB,EAA8B;AAC5B;AACD;;AAED,YAAMmJ,gBAAgBvD,SAAS5F,aAAT,CAAtB;;AAEA,YAAI,CAACmJ,aAAL,EAAoB;AAClB;AACD;;AAED,YAAIC,qBAAqBD,cAAchL,MAAvC;;AAEA,aAAK,IAAIkL,IAAI,CAAb,EAAgBA,IAAID,kBAApB,EAAwCC,GAAxC,EAA6C;AAC3C,cAAM1I,SAASwI,cAAcE,CAAd,CAAf;;AAEA,cAAI1I,OAAOuF,IAAP,IAAe,IAAnB,EAAyB;AACvB,mBAAKgD,uBAAL,CAA6BrB,oBAA7B,EAAmDF,cAAnD,EAAmEhH,MAAnE,EAA2EoH,qBAA3E;AACD,WAFD,MAEO;AACLD,qCAAyBnH,OAAOC,WAAhC,IAA+CkH,yBAAyBnH,OAAOC,WAAhC,KAAgD,EAA/F;AACAkH,qCAAyBnH,OAAOC,WAAhC,EAA6ChB,IAA7C,CAAkDe,MAAlD;AACD;AACF;AACF,OAvBD;;AAyBA,WAAK2I,aAAL,CACE7B,QADF,EAEEC,eAFF,EAGEC,cAHF,EAIE/B,SAASM,IAJX,EAKE2B,oBALF,EAMEC,wBANF,EAOEC,qBAPF;;AAUA,aAAON,QAAP;AACD;;;6BAES;AAAA;;AAAA,UACArL,eADA,GACoB,KAAK7B,KADzB,CACA6B,eADA;;;AAGR,aACE;AAAA;AAAA,UAAK,OAAOA,eAAZ;AAKGmJ,wBAAMgE,YAAN,CAAmB,KAAKhP,KAAL,CAAWiP,QAA9B,EAAwC,EAAxC,EAA4C,gBAOvC;AAAA,cANJC,iBAMI,QANJA,iBAMI;AAAA,cALJC,UAKI,QALJA,UAKI;AAAA,cAJJC,eAII,QAJJA,eAII;AAAA,cAHJ5B,qBAGI,QAHJA,qBAGI;AAAA,cAFJjI,UAEI,QAFJA,UAEI;AAAA,cADJ8F,QACI,QADJA,QACI;AAAA,cACIyB,cADJ,GACuB,OAAK7F,KAD5B,CACI6F,cADJ;;;AAGJ,cAAI,CAACA,cAAL,EAAqB;AACnB,mBAAOoC,kBAAkB3J,UAAlB,EAA8B8F,QAA9B,CAAP;AACD;;AAED,iBAAO8D,WAAW,OAAKE,kBAAL,CAAwBD,gBAAgB7J,UAAhB,CAAxB,EAAqD8F,QAArD,EAA+DmC,qBAA/D,CAAX,CAAP;AACD,SAfA;AALH,OADF;AAwBD;;;;EA/QkC7E,gB;;kBAkRtBnC,sB;;;;;;;ACzRf;AAAA;AACA;AACA;;;;AAIA;;;AAGA;;;;;;AAMA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,IAAI;AACjB;AACA;AACA;AACA,qDAAqD,cAAc,EAAE;AACrE,oDAAoD,oBAAoB,EAAE;AAC1E;AACA;AACA;;AAEe,mEAAI,EAAC;AACpB;;;;;;;;;;AC9DA,IAAMkG,iBAAiB,uBAAvB;AACA,IAAMC,gBAAgB,MAAtB;AACA,IAAM2C,mBAAmB,CAAC5C,cAAD,EAAiBC,aAAjB,CAAzB;;AAEA4C,OAAOC,OAAP,CAAeC,OAAf,GAAyBH,gBAAzB;AACAC,OAAOC,OAAP,CAAe9C,cAAf,GAAgCA,cAAhC;AACA6C,OAAOC,OAAP,CAAe7C,aAAf,GAA+BA,aAA/B,C;;;;;;;;;;;;;;;ACPA;;;;AACA;;IAAYpI,a;;AACZ;;;;AACA;;;;;;;;;;;;;;IAEMoC,kC;;;AACJ,8CAAa3G,KAAb,EAAoB;AAAA;;AAAA,wKACZA,KADY;;AAGlB,UAAK0P,4BAAL,GAAoC,MAAKA,4BAAL,CAAkCrG,IAAlC,OAApC;AAHkB;AAInB;;;;iDAE6BxG,E,EAAI;AAChCA,SAAG8M,eAAH;;AAEA;AACA3O,wBAAQ4O,IAAR,CAAa,+BAAb,EAA8C,CAACrL,cAAc9C,OAA7D;AACA,WAAKzB,KAAL,CAAW6P,SAAX;AACD;;;6BAES;AACR,aACE;AAAA;AAAA;AACE,iBAAM,yCADR;AAEE,iBAAO,EAAEpP,SAAS,cAAX,EAFT;AAGE,mBAAS,KAAKiP;AAHhB;AAKE;AAAA;AAAA;AACE,mBAAO,EAAEjP,SAAS,cAAX,EAA2B+L,aAAa,QAAxC,EADT;AAEE,uBAAWjI,cAAc9C,OAAd,GAAwBsI,qCAAO+F,MAA/B,GAAwC;AAFrD;AAIE,kDAAM,WAAU,YAAhB;AAJF,SALF;AAWE;AAAA;AAAA,YAAM,OAAO,EAAErP,SAAS,cAAX,EAAb;AAAA;AAAA;AAXF,OADF;AAiBD;;;;EAjC8CkI,gB;;kBAoClChC,kC;;;;;;;;;;;;;;;ACzCf;;;;AACA;;;;AACA;;IAAYpC,a;;AACZ;;;;AACA;;;;AACA;;;;;;;;;;;;;;IAEMmC,gC;;;AACJ,4CAAa1G,KAAb,EAAoB;AAAA;;AAAA,oKACZA,KADY;;AAGlB,UAAKiH,KAAL,GAAa;AACX8I,kBAAY,KADD;AAEXjK,oBAAcvB,cAAc7C,UAAd,IAA4B;AAF/B,KAAb;;AAKA,UAAKsO,UAAL,GAAkB,MAAKA,UAAL,CAAgB3G,IAAhB,OAAlB;AACA,UAAK4G,WAAL,GAAmB,MAAKA,WAAL,CAAiB5G,IAAjB,OAAnB;AACA,UAAK6G,qBAAL,GAA6B,MAAKA,qBAAL,CAA2B7G,IAA3B,OAA7B;AAVkB;AAWnB;;;;+BAEWxG,E,EAAI;AACdA,SAAG8M,eAAH;AACA,WAAKjI,QAAL,CAAc,EAAEqI,YAAY,IAAd,EAAd;AACD;;;kCAEc;AACb,WAAKrI,QAAL,CAAc,EAAEqI,YAAY,KAAd,EAAd;AACA,WAAK/P,KAAL,CAAW6P,SAAX;AACD;;;0CAEsB/J,Y,EAAc;AAAA,UAC3BqK,SAD2B,GACb,KAAKnQ,KADQ,CAC3BmQ,SAD2B;;;AAGnCA,gBAAU;AACRxE,cAAM7F;AADE,OAAV;;AAIA,WAAK4B,QAAL,CAAc;AACZ5B;AADY,OAAd,EAEG,YAAM;AACP9E,0BAAQ4O,IAAR,CAAa,qBAAb,EAAoC9J,YAApC;AACD,OAJD;AAKD;;;6BAES;AAAA,mBAC6B,KAAKmB,KADlC;AAAA,UACA8I,UADA,UACAA,UADA;AAAA,UACYjK,YADZ,UACYA,YADZ;;AAER,UAAMsK,UAAU5L,yBAAOiK,aAAP,GAAuB9C,IAAvC;AACA,UAAM0E,WAAWvK,aAAalC,MAAb,GAAsB,CAAvC;;AAEA,aACE;AAAA;AAAA;AACE,iBAAM,6BADR;AAEE,iBAAO,EAAEnD,SAAS,cAAX,EAFT;AAGE,mBAAS,KAAKuP;AAHhB;AAKE;AAAA;AAAA,YAAM,OAAO,EAAEvP,SAAS,cAAX,EAAb;AACE;AAAA;AAAA;AACE,qBAAO,EAAEA,SAAS,cAAX,EAA2B+L,aAAa,QAAxC,EADT;AAEE,yBAAW6D,WAAWtG,qCAAO+F,MAAlB,GAA2B;AAFxC;AAIE,oDAAM,WAAU,cAAhB,GAJF;AAAA;AAME,oDAAM,WAAU,WAAhB;AANF,WADF;AASE;AAAA;AAAA,cAAM,OAAO,EAAErP,SAAS,cAAX,EAAb;AAAA;AAAA;AATF,SALF;AAkBE;AAAC,iCAAD;AAAA;AACE,kBAAMsP,UADR;AAEE,qBAAS,KAAKE;AAFhB;AAIE,wCAAC,mCAAD;AACE,kBAAMG,OADR;AAEE,0BAActK,YAFhB;AAGE,+BAAmB,KAAKoK,qBAH1B;AAIE,2BAAe,KAAKD;AAJtB;AAJF;AAlBF,OADF;AAgCD;;;;EA3E4CtH,gB;;kBA8EhCjC,gC;;;;;;;;;;;;;;;ACrFf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;IAEM4J,yB;;;AACJ,qCAAatQ,KAAb,EAAoB;AAAA;;AAAA,sJACZA,KADY;;AAGlB,UAAKiH,KAAL,GAAa;AACXsJ,oBAAc,IADH;AAEXC,kBAAY;AAFD,KAAb;;AAKA,UAAKC,cAAL,GAAsB,MAAKA,cAAL,CAAoBpH,IAApB,OAAtB;AACA,UAAKqH,cAAL,GAAsB,MAAKA,cAAL,CAAoBrH,IAApB,OAAtB;AACA,UAAKsH,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBtH,IAAzB,OAA3B;AACA,UAAKuH,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBvH,IAAtB,OAAxB;AACA,UAAKwH,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBxH,IAAvB,OAAzB;AACA,UAAKyH,eAAL,GAAuB,MAAKA,eAAL,CAAqBzH,IAArB,OAAvB;AAbkB;AAcnB;;;;wCAEoB;AACnB,WAAK/B,KAAL;AACD;;;mCAEeqE,I,EAAM;AAAA;;AACpB,aAAO,UAACoF,KAAD,EAAQvJ,GAAR;AAAA,eAAgB,OAAKwJ,aAAL,CAAmBrF,KAAKoF,KAAL,CAAnB,CAAhB;AAAA,OAAP;AACD;;;mCAEe5P,G,EAAK;AACnB,UAAM8P,uBAAuB,KAAKjR,KAAL,CAAW8F,YAAxC;;AAEA,UAAMA,4CACDmL,oBADC,IAEJ9P,GAFI,EAAN;;AAKA,WAAKnB,KAAL,CAAWkR,iBAAX,CAA6BpL,YAA7B;AACA,WAAKwB,KAAL;AACD;;;4BAEQ;AACP,UAAI,KAAKD,IAAL,CAAU8J,iBAAV,IAA+B,OAAO,KAAK9J,IAAL,CAAU8J,iBAAV,CAA4B7J,KAAnC,KAA6C,UAAhF,EAA4F;AAC1F,aAAKD,IAAL,CAAU8J,iBAAV,CAA4B7J,KAA5B;AACD;AACF;;;kCAEc8I,O,EAAStK,Y,EAAc0K,U,EAAY;AAChD,UAAI1K,aAAalC,MAAb,KAAwB,CAAxB,IAA6B4M,eAAe,EAAhD,EAAoD;AAClD,eAAOJ,OAAP;AACD;;AAED,aAAOA,QAAQtE,MAAR,CAAe,UAAC3K,GAAD,EAAS;AAC7B,YAAIiQ,aAAa,IAAjB;;AAEA,YAAIZ,eAAe,EAAnB,EAAuB;AACrBY,uBAAajQ,IAAIuD,IAAJ,CAASiB,OAAT,CAAiB6K,UAAjB,MAAiC,CAAC,CAA/C;AACD;;AAED,YAAI,CAACY,UAAL,EAAiB;AACf,iBAAO,KAAP;AACD;;AAED,YAAMC,sBAAsBvL,aAAazE,IAAb,CAAkB,UAACiQ,SAAD,EAAe;AAC3D,iBAAOA,UAAU/P,OAAV,KAAsBJ,IAAII,OAAjC;AACD,SAF2B,CAA5B;;AAIA,eAAO,CAAC8P,mBAAR;AACD,OAhBM,CAAP;AAiBD;;;wCAEoBxO,E,EAAI;AACvB;AACA;AACA,UAAIA,GAAGC,MAAH,KAAc,KAAKuE,IAAL,CAAUkK,YAA5B,EAA0C;AACxC,aAAKjK,KAAL;AACD;AACF;;;qCAEiBzE,E,EAAI;AACpB,WAAK6E,QAAL,CAAc;AACZ8I,oBAAY3N,GAAGC,MAAH,CAAUC;AADV,OAAd;AAGD;;;sCAEkBF,E,EAAI;AACrB,UAAIA,GAAG2O,gBAAP,EAAyB;AACvB;AACD;;AAED,UAAIC,UAAU5O,GAAG4O,OAAjB;AACA,UAAIC,WAAW7O,GAAGC,MAAlB;AACA,UAAI6O,SAAS,KAAb;AACA,UAAIC,WAAW,EAAf;AACA,UAAIC,YAAY,CAAhB;;AAEA,UAAIJ,YAAYG,QAAhB,EAA0B;AACxB/O,WAAGiP,cAAH;;AAEA,eAAO,KAAK9R,KAAL,CAAW+R,aAAX,EAAP;AACD;;AAED,UAAIN,YAAYI,SAAhB,EAA2B;AACzBF,iBAAS,IAAT;AACD;;AAED,UAAIA,UAAUD,SAAS3O,KAAT,KAAmB,EAAjC,EAAqC;AACnC,YAAI+C,eAAe,KAAK9F,KAAL,CAAW8F,YAA9B;AACA,YAAIkM,wBAAwBlM,aAAalC,MAAb,GAAsB,CAAlD;;AAEAf,WAAGiP,cAAH;;AAEA,YAAIE,yBAAyB,CAA7B,EAAgC;AAC9B,eAAKlB,eAAL,CAAqBhL,aAAakM,qBAAb,CAArB,EAA0DA,qBAA1D;AACD;AACF;AACF;;;oCAEgB7Q,G,EAAK8Q,Q,EAAU;AAC9B,UAAMC,uBAAuB,KAAKlS,KAAL,CAAW8F,YAAxC;;AAEA,UAAMA,4CACDoM,qBAAqBC,KAArB,CAA2B,CAA3B,EAA8BF,QAA9B,CADC,sBAEDC,qBAAqBC,KAArB,CAA2BF,WAAW,CAAtC,CAFC,EAAN;;AAKA,WAAKjS,KAAL,CAAWkR,iBAAX,CAA6BpL,YAA7B;AACD;;;kCAEc3E,G,EAAK;AAAA;;AAClB,aACE;AAAA;AAAA;AACE,eAAKA,IAAII,OADX;AAEE,qBAAW2J,oCAAMkH,YAFnB;AAGE,mBAAS;AAAA,mBAAM,OAAK1B,cAAL,CAAoBvP,GAApB,CAAN;AAAA;AAHX;AAKE,sCAAC,mBAAD,IAAW,OAAOA,IAAIlB,KAAtB,GALF;AAAA;AAOE;AAAA;AAAA;AAAOkB,cAAIuD;AAAX;AAPF,OADF;AAWD;;;6BAES;AAAA;;AAAA,mBAC6B,KAAKuC,KADlC;AAAA,UACAsJ,YADA,UACAA,YADA;AAAA,UACcC,UADd,UACcA,UADd;AAAA,mBAEuB,KAAKxQ,KAF5B;AAAA,UAEA2L,IAFA,UAEAA,IAFA;AAAA,UAEM7F,YAFN,UAEMA,YAFN;;AAGR,UAAMuM,mBAAmB,KAAKC,aAAL,CAAmB3G,IAAnB,EAAyB7F,YAAzB,EAAuC0K,UAAvC,CAAzB;;AAEA,UAAI+B,oBAAoB,EAAxB;AACA,UAAIC,oBAAoB,EAAxB;;AAEA,UAAIjC,YAAJ,EAAkB;AAChBgC,0BAAkB9R,OAAlB,GAA4B,OAA5B;AACD,OAFD,MAEO;AACL8R,0BAAkB9R,OAAlB,GAA4B,MAA5B;AACD;;AAED,UAAIqF,aAAalC,MAAb,KAAwB,CAA5B,EAA+B;AAC7B4O,0BAAkBrS,KAAlB,GAA0B,MAA1B;AACD;;AAED,aACE;AAAA;AAAA,UAAK,WAAW+K,oCAAMuH,mBAAtB;AACE;AAAA;AAAA,YAAK,WAAWvH,oCAAMwH,kBAAtB;AACE;AAAA;AAAA,cAAK,KAAI,cAAT,EAAwB,WAAWxH,oCAAMyH,UAAzC,EAAqD,SAAS,KAAKhC,mBAAnE;AACE;AAAA;AAAA;AACG7K,2BAAa6E,GAAb,CAAiB,UAACxJ,GAAD,EAAM8Q,QAAN,EAAmB;AACnC,oBAAMW,YAAY;AAChBtS,mCAAiBa,IAAIlB,KADL;AAEhBG,+BAAa,8BAAee,IAAIlB,KAAnB,EAA0B,CAAC,IAA3B,CAFG;AAGhBA,yBAAO,iCAAkBkB,IAAIlB,KAAtB,KAAgC,GAAhC,GAAsC,MAAtC,GAA+C;AAHtC,iBAAlB;;AAMA,uBACE;AAAA;AAAA,oBAAM,KAAKkB,IAAII,OAAf,EAAwB,WAAW2J,oCAAM2H,cAAzC,EAAyD,OAAOD,SAAhE;AACGzR,sBAAIuD,IADP;AAEE,uDAAG,WAAWwG,oCAAM4H,oBAApB,EAA0C,SAAS;AAAA,6BAAM,OAAKhC,eAAL,CAAqB3P,GAArB,EAA0B8Q,QAA1B,CAAN;AAAA,qBAAnD;AAFF,iBADF;AAMD,eAbA,CADH;AAeE;AACE,qBAAI,mBADN;AAEE,sBAAK,MAFP;AAGE,6BAAanM,aAAalC,MAAb,KAAwB,CAAxB,GAA4B,cAA5B,GAA6C,EAH5D;AAIE,2BAAWsH,oCAAM6H,UAJnB;AAKE,uBAAOP,iBALT;AAME,0BAAU,KAAK5B,gBANjB;AAOE,2BAAW,KAAKC;AAPlB;AAfF;AADF;AADF,SADF;AA8BE;AAAA;AAAA;AACE,iBAAI,SADN;AAEE,uBAAW3F,oCAAM8H,iBAFnB;AAGE,mBAAOT;AAHT;AAKE;AAAA;AAAA,cAAK,WAAWrH,oCAAM+H,QAAtB;AACGtH,iBAAK/H,MAAL,KAAgB,CAAhB,GACC;AAAA;AAAA,gBAAK,WAAWsH,oCAAMgI,aAAtB;AAAA;AAAA,aADD,GAKC,8BAAC,mBAAD;AACE,4BAAc,KAAKzC,cAAL,CAAoB4B,gBAApB,CADhB;AAEE,sBAAQA,iBAAiBzO;AAF3B;AANJ;AALF;AA9BF,OADF;AAmDD;;;;EAhNqC+E,gB;;AAmNxC2H,0BAA0B3G,YAA1B,GAAyC;AACvCuH,qBAAmB,6BAAM,CAAE;AADY,CAAzC;;AAIAZ,0BAA0B3P,SAA1B,GAAsC;AACpCgL,QAAM/K,oBAAUuS,OAAV,CAAkBvS,oBAAUwS,KAAV,CAAgB;AACtC7R,aAASX,oBAAUC,MADmB;AAEtC6D,UAAM9D,oBAAUC,MAFsB;AAGtCZ,WAAOW,oBAAUC;AAHqB,GAAhB,CAAlB,CAD8B;AAMpCiF,gBAAclF,oBAAUuS,OAAV,CAAkBvS,oBAAUwS,KAAV,CAAgB;AAC9C7R,aAASX,oBAAUC,MAD2B;AAE9C6D,UAAM9D,oBAAUC,MAF8B;AAG9CZ,WAAOW,oBAAUC;AAH6B,GAAhB,CAAlB,CANsB;AAWpCqQ,qBAAmBtQ,oBAAUuC,IAXO;AAYpC4O,iBAAenR,oBAAUuC;AAZW,CAAtC;;kBAeemN,yB;;;;;;AC9Of,gD;;;;;;;;;;;;;ACAA;;;;;;kBAEe,UAACtN,GAAD,EAAS;AACtB,MAAMa,MAAM,wBAASb,GAAT,CAAZ;;AAEA,MAAIqQ,cAAJ;AAAA,MAAWC,cAAX;AAAA,MAAkBC,cAAlB;AAAA,MAAyBC,UAAzB;AAAA,MAA4BC,UAA5B;AAAA,MAA+BC,UAA/B;;AAEAL,UAAQxP,IAAI8P,CAAJ,GAAQ,GAAhB;AACAL,UAAQzP,IAAI+P,CAAJ,GAAQ,GAAhB;AACAL,UAAQ1P,IAAIgQ,CAAJ,GAAQ,GAAhB;;AAEA,MAAIR,SAAS,OAAb,EAAsB;AACpBG,QAAIH,QAAQ,KAAZ;AACD,GAFD,MAEO;AACLG,QAAItP,KAAK4P,GAAL,CAAU,CAACT,QAAQ,KAAT,IAAkB,KAA5B,EAAoC,GAApC,CAAJ;AACD;;AAED,MAAIC,SAAS,OAAb,EAAsB;AACpBG,QAAIH,QAAQ,KAAZ;AACD,GAFD,MAEO;AACLG,QAAIvP,KAAK4P,GAAL,CAAU,CAACR,QAAQ,KAAT,IAAkB,KAA5B,EAAoC,GAApC,CAAJ;AACD;;AAED,MAAIC,SAAS,OAAb,EAAsB;AACpBG,QAAIH,QAAQ,KAAZ;AACD,GAFD,MAEO;AACLG,QAAIxP,KAAK4P,GAAL,CAAU,CAACP,QAAQ,KAAT,IAAkB,KAA5B,EAAoC,GAApC,CAAJ;AACD;;AAED,SAAQ,SAASC,CAAV,GAAgB,SAASC,CAAzB,GAA+B,SAASC,CAA/C;AACD,C;;;;;;;;;;;;;AC7BD,IAAMK,iBAAiB,kCAAvB;;kBAEe,UAAC/Q,GAAD,EAAS;AACtB;AACA,MAAIgR,UAAUhR,IAAIW,OAAJ,CAAYoQ,cAAZ,EAA4B,UAAUE,CAAV,EAAaN,CAAb,EAAgBC,CAAhB,EAAmBC,CAAnB,EAAsB;AAC9D,WAAOF,IAAIA,CAAJ,GAAQC,CAAR,GAAYA,CAAZ,GAAgBC,CAAhB,GAAoBA,CAA3B;AACD,GAFa,CAAd;;AAIA,MAAIK,SAAS,4CAA4CC,IAA5C,CAAiDH,OAAjD,CAAb;;AAEA,SAAOE,SAAS;AACdP,OAAG3P,SAASkQ,OAAO,CAAP,CAAT,EAAoB,EAApB,CADW;AAEdN,OAAG5P,SAASkQ,OAAO,CAAP,CAAT,EAAoB,EAApB,CAFW;AAGdL,OAAG7P,SAASkQ,OAAO,CAAP,CAAT,EAAoB,EAApB;AAHW,GAAT,GAIH,IAJJ;AAKD,C;;;;;;AChBD;AACA,kBAAkB,iqB;;;;;;;;;;;;;;;ACDlB;;;;AACA;;;;AACA;;;;;;;;;;;;IAEMrN,iB;;;;;;;;;;;6BACM;AAAA,mBACqB,KAAK7G,KAD1B;AAAA,UACAoG,MADA,UACAA,MADA;AAAA,UACQiF,QADR,UACQA,QADR;;AAER,UAAIM,OAAOvF,OAAOuF,IAAP,IAAe,EAA1B;;AAEA;AACA,UAAIvF,OAAOC,WAAP,KAAuB,MAA3B,EAAmC;AACjCsF,eAAO,CAACvF,MAAD,CAAP;AACD;;AAED,UAAMgO,aAAazI,KAAK/H,MAAxB;;AAEA,aACE;AAAA;AAAA,UAAK,OAAO,EAAEnD,SAAS,cAAX,EAA2B4T,YAAY,QAAvC,EAAiD7H,aAAa,QAA9D,EAAZ;AACGb,aAAKhB,GAAL,CAAS,UAACxJ,GAAD,EAAM8Q,QAAN,EAAmB;AAC3B,cAAMzD,WAAW,4BAAanD,SAASM,IAAtB,EAA4BxK,IAAII,OAAhC,KAA4C,EAA7D;;AAEA,iBACE;AAAA;AAAA,cAAM,KAAKJ,IAAII,OAAf,EAAwB,OAAOiN,SAAS9J,IAAxC;AACE,0CAAC,mBAAD,IAAW,OAAO8J,SAASvO,KAA3B,EAAkC,OAAO,CAAzC,EAA4C,QAAQ,EAApD,GADF;AAEIgS,yBAAamC,aAAa,CAA3B,GAAgC,GAAhC,GAAsC;AAFzC,WADF;AAMD,SATA;AADH,OADF;AAcD;;;;EA1B6BzL,gB;;kBA6BjB9B,iB;;;;;;;;;;;;;;;ACjCf;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;IAEMC,yB;;;;;;;;;;;6BACM;AAAA,UACAT,WADA,GACgB,KAAKrG,KADrB,CACAqG,WADA;;;AAGR,UAAIA,gBAAgB,MAAhB,IAA0BA,gBAAgB,SAA9C,EAAyD;AACvD,eAAO,IAAP;AACD;;AAED,UAAIsF,OAAO,EAAX;;AAEA,UAAItF,gBAAgB,MAApB,EAA4B;AAC1BsF,aAAKtG,IAAL,CAAU,EAAEX,MAAM,KAAK1E,KAAL,CAAW0E,IAAnB,EAAyBnD,SAAS,KAAKvB,KAAL,CAAWuB,OAA7C,EAAsDtB,OAAO,KAAKD,KAAL,CAAWC,KAAxE,EAAV;AACD,OAFD,MAEO;AACL0L,eAAO,KAAK3L,KAAL,CAAW2L,IAAX,IAAmB,EAA1B;;AAEAA,eAAOA,KAAKhB,GAAL,CAAS,UAACoB,CAAD,EAAO;AACrB,iBAAO,4BAAavH,yBAAOiK,aAAP,GAAuB9C,IAApC,EAA0CI,EAAExK,OAA5C,CAAP;AACD,SAFM,CAAP;AAGD;;AAED,UAAM6S,aAAazI,KAAK/H,MAAxB;;AAEA,aACE;AAAA;AAAA,UAAK,OAAO,EAAEnD,SAAS,cAAX,EAA2B4T,YAAY,QAAvC,EAAiD7H,aAAa,QAA9D,EAAZ;AACGb,aAAKhB,GAAL,CAAS,UAACxJ,GAAD,EAAM8Q,QAAN,EAAmB;AAC3B,cAAI,CAAC9Q,GAAL,EAAU;AACR;AACD;;AAED,iBACE;AAAA;AAAA,cAAM,KAAKA,IAAII,OAAf,EAAwB,OAAOJ,IAAIuD,IAAnC;AACE,0CAAC,mBAAD,IAAW,OAAOvD,IAAIlB,KAAtB,EAA6B,OAAO,CAApC,EAAuC,QAAQ,EAA/C,GADF;AAEIgS,yBAAamC,aAAa,CAA3B,GAAgC,GAAhC,GAAsC;AAFzC,WADF;AAMD,SAXA;AADH,OADF;AAgBD;;;;EAtCqCzL,gB;;kBAyCzB7B,yB;;;;;;;;;;;;;kBC7CA,UAACV,MAAD,EAASb,UAAT,EAAqB+O,UAArB,EAAoC;AAAA,MACzC3I,IADyC,GAChC2I,UADgC,CACzC3I,IADyC;;AAEjD,MAAM4I,kBAAkBnO,OAAOuF,IAAP,IAAe,EAAvC;;AAEA,MAAIA,QAAQ,IAAZ,EAAkB;AAChB,WAAO,IAAP;AACD;;AAED,MAAIA,KAAK/H,MAAL,GAAc,CAAlB,EAAqB;AACnB,WAAO+H,KAAKkC,KAAL,CAAW,UAAC1M,GAAD,EAAS;AACzB,aAAOoT,gBAAgBlT,IAAhB,CAAqB,UAACmT,WAAD;AAAA,eAAiBA,YAAYjT,OAAZ,KAAwBJ,IAAII,OAA7C;AAAA,OAArB,CAAP;AACD,KAFM,CAAP;AAGD;;AAED,SAAO,IAAP;AACD,C","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n","module.exports = Studio.libraries['react'];","module.exports = Studio;","import PropTypes from 'prop-types'\nimport React from 'react'\nimport simpleCheckForValidColor from './simpleCheckForValidColor'\nimport colorLuminance from './colorLuminance'\n\nconst ShowColor = (props) => {\n  const {\n    color,\n    height = 15,\n    width = 20\n  } = props\n\n  let borderColor = props.borderColor\n  let currentColor = 'inherit'\n\n  if (simpleCheckForValidColor(color)) {\n    currentColor = color\n  }\n\n  if (!borderColor) {\n    borderColor = colorLuminance(currentColor, -0.35)\n  }\n\n  return (\n    <span style={{\n      backgroundColor: currentColor,\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderColor: borderColor,\n      display: 'inline-block',\n      height: height,\n      verticalAlign: 'middle',\n      width: width\n    }} />\n  )\n}\n\nShowColor.propTypes = {\n  color: PropTypes.string.isRequired,\n  borderColor: PropTypes.string,\n  height: PropTypes.number,\n  width: PropTypes.number\n}\n\nexport default ShowColor\n","module.exports = Studio.libraries['prop-types'];","import mitt from 'mitt'\n\nconst emitter = mitt()\n\nexport default emitter\n","\nexport default (tagSet, tagShortId) => {\n  let tag\n\n  const found = tagSet.some((tagInSet) => {\n    tag = tagInSet\n    return tagInSet.shortid === tagShortId\n  })\n\n  if (found) {\n    return tag\n  }\n\n  return undefined\n}\n","\nexport let current\nexport let filterTags\n","import PropTypes from 'prop-types'\nimport React from 'react'\nimport { Popover } from 'jsreport-studio'\nimport ShowColor from './ShowColor'\nimport ColorPicker from './ColorPicker'\n\nconst ColorPicketTrigger = (props) => {\n  const {\n    displayColorPicker,\n    color,\n    containerStyles,\n    onClickColorTrigger,\n    onInputChange,\n    onChangeSelectionColor,\n    onCloseColorPicker,\n    translateXColorPickerFromTrigger,\n    translateYColorPickerFromTrigger\n  } = props\n\n  const containerTriggerPickerStyles = {\n    display: 'inline-block',\n    height: '32px',\n    padding: '5px'\n  }\n\n  const defaultContainerStyles = {\n    display: 'inline-block'\n  }\n\n  const currentColor = color || ''\n  const currentContainerStyles = Object.assign({}, defaultContainerStyles, containerStyles)\n\n  let colorPickerContainerStyles = {}\n\n  if (translateXColorPickerFromTrigger || translateYColorPickerFromTrigger) {\n    let transformValue = ''\n\n    if (translateXColorPickerFromTrigger) {\n      transformValue += `translateX(${translateXColorPickerFromTrigger}) `\n    }\n\n    if (translateYColorPickerFromTrigger) {\n      transformValue += `translateY(${translateYColorPickerFromTrigger}) `\n    }\n\n    colorPickerContainerStyles.transform = transformValue\n  }\n\n  return (\n    <div style={currentContainerStyles}>\n      <span style={containerTriggerPickerStyles}>\n        <span style={{ display: 'inline-block' }}>\n          <ShowColor color={currentColor} />&nbsp;\n          <input\n            type='text'\n            value={currentColor}\n            style={{ width: '90px' }}\n            maxLength={7}\n            placeholder='#006600'\n            onFocus={onClickColorTrigger}\n            onChange={(ev) => typeof onInputChange === 'function' && onInputChange(ev.target.value)}\n          />\n        </span>\n      </span>\n      <Popover\n        wrapper={false}\n        open={displayColorPicker}\n        onClose={onCloseColorPicker}\n      >\n        <div style={colorPickerContainerStyles}>\n          <ColorPicker\n            color={currentColor}\n            onChangeComplete={(color) => typeof onChangeSelectionColor === 'function' && onChangeSelectionColor(color.hex)}\n          />\n        </div>\n      </Popover>\n    </div>\n  )\n}\n\nColorPicketTrigger.propTypes = {\n  displayColorPicker: PropTypes.bool.isRequired,\n  color: PropTypes.string,\n  containerStyles: PropTypes.object,\n  onClickColorTrigger: PropTypes.func,\n  onCloseColorPicker: PropTypes.func.isRequired,\n  onInputChange: PropTypes.func,\n  onChangeSelectionColor: PropTypes.func,\n  // i know.. it is a shame to decide the position of the color picker\n  // in this way, maybe in the future it can be calculated based\n  // on the position of the button trigger\n  // using a \"position\" prop to specify the direction\n  translateXColorPickerFromTrigger: PropTypes.string,\n  translateYColorPickerFromTrigger: PropTypes.string\n}\n\nexport default ColorPicketTrigger\n","const HEX_COLOR_REGEXP = /^#[0-9A-F]{6}$/i\n\nconst simpleCheckForValidColor = (color) => {\n  return HEX_COLOR_REGEXP.test(color)\n}\n\nexport default simpleCheckForValidColor\n","\nexport default (hex, lum) => {\n  const selectedLum = lum || 0\n  let selectedHex\n\n  selectedHex = String(hex).replace(/[^0-9a-f]/gi, '')\n\n  if (selectedHex.length < 6) {\n    selectedHex = selectedHex[0] + selectedHex[0] + selectedHex[1] + selectedHex[1] + selectedHex[2] + selectedHex[2]\n  }\n\n  // convert to decimal and change luminosity\n  let rgb = '#'\n  let c\n  let i\n\n  for (i = 0; i < 3; i++) {\n    c = parseInt(selectedHex.substr(i * 2, 2), 16)\n    c = Math.round(Math.min(Math.max(0, c + (c * selectedLum)), 255)).toString(16)\n    rgb += ('00' + c).substr(c.length)\n  }\n\n  return rgb\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"active\":\"x-tags-TagEntityTreeButtonToolbar-active\"};","import Studio from 'jsreport-studio'\nimport NewTagModal from './NewTagModal'\nimport TagEditor from './TagEditor'\nimport TagProperties from './TagProperties'\nimport EntityTagProperties from './EntityTagProperties'\nimport EntityTreeTagOrganizer from './EntityTreeTagOrganizer'\nimport TagEntityTreeOrganizeButtonToolbar from './TagEntityTreeOrganizeButtonToolbar'\nimport TagEntityTreeFilterButtonToolbar from './TagEntityTreeFilterButtonToolbar'\nimport TagEntityTreeItem from './TagEntityTreeItem'\nimport TagEntityTreeTagGroupItem from './TagEntityTreeTagGroupItem'\nimport emitter from './emitter'\nimport * as organizeState from './organizeState'\nimport filterItemWithTagsStrategy from './filterItemWithTagsStrategy'\n\nStudio.addEntitySet({\n  name: 'tags',\n  faIcon: 'fa-tag',\n  visibleName: 'tag',\n  onNew: (options) => Studio.openModal(NewTagModal, options),\n  helpUrl: 'http://jsreport.net/learn/tags',\n  referenceAttributes: ['color'],\n  entityTreePosition: 300\n})\n\n// wait for all extensions to be loaded\nStudio.initializeListeners.push(() => {\n  // add tags to referenceAttributes in all entities\n  Object.keys(Studio.entitySets).forEach((entitySetName) => {\n    let entitySet = Studio.entitySets[entitySetName]\n\n    // ignore tags entity set\n    if (entitySet.name === 'tags') {\n      return\n    }\n\n    if (entitySet.referenceAttributes.indexOf('tags') === -1) {\n      entitySet.referenceAttributes.push('tags')\n    }\n  })\n})\n\nemitter.on('organizationModeByTagsChanged', (organizationMode) => { organizeState.current = organizationMode })\nemitter.on('filterByTagsChanged', (selectedTags) => { organizeState.filterTags = selectedTags })\n\nStudio.addEditorComponent('tags', TagEditor)\nStudio.addPropertiesComponent(TagProperties.title, TagProperties, (entity) => entity.__entitySet === 'tags')\nStudio.addPropertiesComponent(EntityTagProperties.title, EntityTagProperties, (entity) => entity.__entitySet !== 'tags')\n\nStudio.addEntityTreeWrapperComponent(EntityTreeTagOrganizer)\n\nStudio.addEntityTreeToolbarComponent(TagEntityTreeFilterButtonToolbar, 'group')\nStudio.addEntityTreeToolbarComponent(TagEntityTreeOrganizeButtonToolbar, 'group')\n\nStudio.addEntityTreeItemComponent(TagEntityTreeItem)\nStudio.addEntityTreeItemComponent(TagEntityTreeTagGroupItem, 'groupRight')\n\nStudio.entityTreeFilterItemResolvers.push(filterItemWithTagsStrategy)\n","import PropTypes from 'prop-types'\r\nimport React, { Component } from 'react'\r\nimport Studio from 'jsreport-studio'\r\nimport ColorPicketTrigger from './ColorPickerTrigger'\r\n\r\nexport default class NewTagModal extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      displayColorPicker: false,\r\n      selectedColor: '',\r\n      error: null\r\n    }\r\n  }\r\n\r\n  // the modal component for some reason after open focuses the panel itself\r\n  componentDidMount () {\r\n    setTimeout(() => this.refs.name.focus(), 0)\r\n  }\r\n\r\n  handleKeyPress (e) {\r\n    if (e.key === 'Enter') {\r\n      this.createTag()\r\n    }\r\n  }\r\n\r\n  async createTag () {\r\n    let entity = {}\r\n\r\n    if (!this.refs.name.value) {\r\n      return this.setState({\r\n        error: 'name field cannot be empty'\r\n      })\r\n    }\r\n\r\n    if (!this.state.selectedColor) {\r\n      return this.setState({\r\n        error: 'color field cannot be empty'\r\n      })\r\n    }\r\n\r\n    if (this.props.options.defaults != null) {\r\n      entity = Object.assign(entity, this.props.options.defaults)\r\n    }\r\n\r\n    entity.name = this.refs.name.value\r\n    entity.color = this.state.selectedColor\r\n    entity.description = this.refs.description.value\r\n\r\n    try {\r\n      let response = await Studio.api.post('/odata/tags', {\r\n        data: entity\r\n      })\r\n\r\n      response.__entitySet = 'tags'\r\n\r\n      Studio.addExistingEntity(response)\r\n      Studio.openTab(response)\r\n      this.props.close()\r\n    } catch (e) {\r\n      this.setState({\r\n        error: e.message\r\n      })\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const {\r\n      displayColorPicker,\r\n      selectedColor,\r\n      error\r\n    } = this.state\r\n\r\n    return (\r\n      <div>\r\n        <div className='form-group'>\r\n          <label>Name</label>\r\n          <input type='text' name='name' ref='name' placeholder='tag name...' onKeyPress={(e) => this.handleKeyPress(e)} />\r\n        </div>\r\n        <div className='form-group'>\r\n          <label>Color</label>\r\n\r\n          <div>\r\n            <ColorPicketTrigger\r\n              displayColorPicker={displayColorPicker}\r\n              containerStyles={{ border: '1px dashed #000' }}\r\n              color={selectedColor}\r\n              onClickColorTrigger={() => this.setState({ displayColorPicker: true })}\r\n              onCloseColorPicker={() => this.setState({ displayColorPicker: false })}\r\n              onInputChange={(colorInputValue) => colorInputValue !== selectedColor && this.setState({ selectedColor: colorInputValue })}\r\n              onChangeSelectionColor={(colorHex) => this.setState({ selectedColor: colorHex })}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className='form-group'>\r\n          <label>Description</label>\r\n          <textarea\r\n            name='description'\r\n            ref='description'\r\n            placeholder='You can add more details about this tag here...'\r\n            rows='4'\r\n            style={{ resize: 'vertical' }}\r\n          />\r\n        </div>\r\n        <div className='form-group'>\r\n          <span\r\n            style={{color: 'red', display: error ? 'block' : 'none'}}>{error}</span>\r\n        </div>\r\n        <div className='form-group' style={{opacity: 0.8}}>\r\n          <hr />\r\n          <span>\r\n            You can use tags to organize jsreport objects.<br />\r\n            This can be for example a tag to organize and group related templates, images, data, scripts, assets, etc. <br />\r\n            See the <a target='_blank' title='Help' href='http://jsreport.net/learn/tags'>documentation</a> for details.\r\n          </span>\r\n        </div>\r\n        <div className='button-bar'>\r\n          <button onClick={() => this.createTag()} className={'button confirmation'}>Ok</button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nNewTagModal.propTypes = {\r\n  close: PropTypes.func.isRequired\r\n}\r\n","\nimport ColorWrap from './ColorWrap'\nimport Picker from './Picker'\n\nexport default ColorWrap(Picker)\n","\r\nimport React, { Component, PureComponent } from 'react'\r\nimport debounce from 'lodash.debounce'\r\nimport simpleCheckForValidColor from '../simpleCheckForValidColor'\r\n\r\nconst colorToState = (data) => {\r\n  const color = data.hex ? data.hex : data\r\n\r\n  return {\r\n    hex: `${color}`\r\n  }\r\n}\r\n\r\nconst ColorWrap = (Picker) => {\r\n  class ColorPicker extends (PureComponent || Component) {\r\n    constructor (props) {\r\n      super(props)\r\n\r\n      this.state = {\r\n        ...colorToState(props.color),\r\n        visible: props.display\r\n      }\r\n\r\n      this.debounce = debounce((fn, data, event) => {\r\n        fn(data, event)\r\n      }, 100)\r\n\r\n      this.handleChange = this.handleChange.bind(this)\r\n    }\r\n\r\n    static getDerivedStateFromProps (props) {\r\n      return {\r\n        ...colorToState(props.color),\r\n        visible: props.display\r\n      }\r\n    }\r\n\r\n    handleChange (data, event) {\r\n      const isValidColor = simpleCheckForValidColor(data.hex)\r\n\r\n      if (isValidColor) {\r\n        const colors = colorToState(data)\r\n        this.setState(colors)\r\n        this.props.onChangeComplete && this.debounce(this.props.onChangeComplete, colors, event)\r\n        this.props.onChange && this.props.onChange(colors, event)\r\n      }\r\n    }\r\n\r\n    render () {\r\n      return (\r\n        <Picker\r\n          {...this.props}\r\n          {...this.state}\r\n          onChange={this.handleChange}\r\n        />\r\n      )\r\n    }\r\n  }\r\n\r\n  ColorPicker.defaultProps = {\r\n    color: ''\r\n  }\r\n\r\n  return ColorPicker\r\n}\r\n\r\nexport default ColorWrap\r\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","\nimport handleHover from './utils/handleHover'\nimport Swatch from './Swatch'\n\nconst PickerSwatch = handleHover(({ hover, color, onClick }) => {\n  const styles = {\n    swatch: {\n      width: '25px',\n      height: '25px'\n    }\n  }\n\n  if (hover) {\n    styles.swatch = {\n      ...styles.swatch,\n      position: 'relative',\n      zIndex: '2',\n      outline: '2px solid #fff',\n      boxShadow: '0 0 5px 2px rgba(0,0,0,0.25)'\n    }\n  }\n\n  return (\n    <div style={styles.swatch}>\n      <Swatch color={color} onClick={onClick} />\n    </div>\n  )\n})\n\nconst Picker = ({ width, colors, onChange, triangle }) => {\n  const styles = {\n    card: {\n      width,\n      background: '#fff',\n      border: '1px solid rgba(0,0,0,0.2)',\n      boxShadow: '0 3px 12px rgba(0,0,0,0.15)',\n      borderRadius: '4px',\n      position: 'relative',\n      padding: '5px',\n      display: 'flex',\n      flexWrap: 'wrap'\n    }\n  }\n  const handleChange = (hex, e) => onChange({ hex, source: 'hex' }, e)\n\n  return (\n    <div style={styles.card}>\n      {colors.map((c) => (\n        <PickerSwatch color={c} key={c} onClick={handleChange} />\n      ))}\n    </div>\n  )\n}\n\nPicker.defaultProps = {\n  width: '200px',\n  colors: [\n    '#B80000', '#DB3E00', '#FCCB00', '#008B02', '#006B76',\n    '#1273DE', '#004DCF', '#5300EB', '#EB9694', '#FAD0C3',\n    '#FEF3BD', '#C1E1C5', '#BEDADC', '#C4DEF6'\n  ]\n}\n\nexport default Picker\n","import React from 'react'\r\n\r\nconst handleHover = (Component, Span = 'span') => {\r\n  return class Hover extends React.Component {\r\n    constructor (props) {\r\n      super(props)\r\n\r\n      this.state = { hover: false }\r\n\r\n      this.handleMouseOver = this.handleMouseOver.bind(this)\r\n      this.handleMouseOut = this.handleMouseOut.bind(this)\r\n    }\r\n\r\n    handleMouseOver () {\r\n      this.setState({ hover: true })\r\n    }\r\n    handleMouseOut () {\r\n      this.setState({ hover: false })\r\n    }\r\n\r\n    render () {\r\n      return <Span onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\r\n        <Component {...this.props} {...this.state} />\r\n      </Span>\r\n    }\r\n  }\r\n}\r\n\r\nexport default handleHover\r\n","\nconst Swatch = ({ color, style, onClick, title = color }) => {\n  const styles = {\n    swatch: {\n      background: color,\n      height: '100%',\n      width: '100%',\n      cursor: 'pointer'\n    }\n  }\n\n  const handleClick = (e) => onClick(color, e)\n\n  return (\n    <div style={styles.swatch} onClick={handleClick} title={title} />\n  )\n}\n\nexport default Swatch\n","import PropTypes from 'prop-types'\r\nimport React, { Component } from 'react'\r\nimport ShowColor from './ShowColor'\r\n\r\nexport default class TagEditor extends Component {\r\n  render () {\r\n    const { entity } = this.props\r\n\r\n    let description\r\n\r\n    if (entity.description) {\r\n      description = entity.description\r\n    } else {\r\n      description = <i>{'(no description for this tag)'}</i>\r\n    }\r\n\r\n    return (\r\n      <div className='custom-editor'>\r\n        <div>\r\n          <h1><i className='fa fa-tag' /> {entity.name}</h1>\r\n        </div>\r\n        <div>\r\n          Description: <br />\r\n          <p>{description}</p>\r\n        </div>\r\n        <div>\r\n          Color: <ShowColor color={entity.color} />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nTagEditor.propTypes = {\r\n  entity: PropTypes.object.isRequired\r\n}\r\n","import React, { Component } from 'react'\nimport ShowColor from './ShowColor'\nimport ColorPicketTrigger from './ColorPickerTrigger'\n\nexport default class TagProperties extends Component {\n  static title (entity, entities) {\n    return (\n      <span>\n        <span>\n          tag (color: {<ShowColor color={entity.color} width={15} height={15} />})\n        </span>\n      </span>\n    )\n  }\n\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      displayColorPicker: false\n    }\n  }\n\n  render () {\n    const { displayColorPicker } = this.state\n    const { entity, onChange } = this.props\n\n    return (\n      <div className='properties-section'>\n        <div className='form-group'>\n          <label>Color</label>\n\n          <div>\n            <ColorPicketTrigger\n              displayColorPicker={displayColorPicker}\n              containerStyles={{ border: '1px dashed #000' }}\n              color={entity.color}\n              onClickColorTrigger={() => this.setState({ displayColorPicker: true })}\n              onCloseColorPicker={() => this.setState({ displayColorPicker: false })}\n              onInputChange={(colorInputValue) => colorInputValue !== entity.color && onChange({ _id: entity._id, color: colorInputValue })}\n              onChangeSelectionColor={(colorHex) => onChange({ _id: entity._id, color: colorHex })}\n            />\n          </div>\n        </div>\n        <div className='form-group'>\n          <label>Description</label>\n          <textarea\n            rows='4'\n            style={{ resize: 'vertical' }}\n            value={entity.description || ''}\n            onChange={(v) => onChange({ _id: entity._id, description: v.target.value })}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport ShowColor from './ShowColor'\nimport Studio from 'jsreport-studio'\n\nconst EntityRefSelect = Studio.EntityRefSelect\n\nconst selectValues = (selected) => {\n  const tags = selected.map((v) => {\n    return { shortid: v.shortid }\n  })\n\n  return tags\n}\n\nexport default class EntityTagProperties extends Component {\n  static getSelectedTags (entity, entities) {\n    const getNameAndColor = (t) => {\n      const foundTags = Object.keys(entities).map((k) => entities[k]).filter((tg) => tg.shortid === t.shortid)\n\n      return foundTags.length ? { name: foundTags[0].name, color: foundTags[0].color } : { name: '', color: undefined }\n    }\n\n    return (entity.tags || []).map((t) => ({\n      ...t,\n      ...getNameAndColor(t)\n    }))\n  }\n\n  static title (entity, entities) {\n    if (!entity.tags || !entity.tags.length) {\n      return 'tags'\n    }\n\n    return (\n      <span>\n        tags:&nbsp;\n        <span>\n          {\n            EntityTagProperties.getSelectedTags(entity, entities).map((t, tIndex, allSelectTags) => {\n              return (\n                <span key={t.name} style={{ display: 'inline-block', marginRight: '2px' }}>\n                  <ShowColor color={t.color} width={12} height={15} />\n                  &nbsp;\n                  {t.name}\n                  {tIndex === allSelectTags.length - 1 ? '' : ','}\n                </span>\n              )\n            })\n          }\n        </span>\n      </span>\n    )\n  }\n\n  componentDidMount () {\n    this.removeInvalidTagReferences()\n  }\n\n  componentDidUpdate () {\n    this.removeInvalidTagReferences()\n  }\n\n  removeInvalidTagReferences () {\n    const { entity, entities, onChange } = this.props\n\n    if (!entity.tags) {\n      return\n    }\n\n    const updatedTags = entity.tags.filter((t) => Object.keys(entities).filter((k) => entities[k].__entitySet === 'tags' && entities[k].shortid === t.shortid).length)\n\n    if (updatedTags.length !== entity.tags.length) {\n      onChange({ _id: entity._id, tags: updatedTags })\n    }\n  }\n\n  render () {\n    const { entity, onChange } = this.props\n\n    return (\n      <div className='properties-section'>\n        <div className='form-group'>\n          <EntityRefSelect\n            headingLabel='Select tags'\n            filter={(references) => ({ tags: references.tags })}\n            value={entity.tags ? entity.tags.map((t) => t.shortid) : []}\n            onChange={(selected) => onChange({ _id: entity._id, tags: selectValues(selected) })}\n            multiple\n          />\n        </div>\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport Studio from 'jsreport-studio'\nimport emitter from './emitter'\nimport findTagInSet from './findTagInSet'\n\nconst { noTagGroupName, tagsGroupName } = require('../shared/reservedTagNames')\n\nclass EntityTreeTagOrganizer extends Component {\n  constructor () {\n    super()\n\n    let organizeByDefault = Studio.extensions['tags'].options.organizeByDefault\n\n    if (organizeByDefault == null) {\n      organizeByDefault = false\n    }\n\n    this.state = {\n      organizeByTags: organizeByDefault\n    }\n\n    this.onOrganizationModeChange = this.onOrganizationModeChange.bind(this)\n  }\n\n  componentDidMount () {\n    emitter.on('organizationModeByTagsChanged', this.onOrganizationModeChange)\n  }\n\n  componentWillUnmount () {\n    emitter.off('organizationModeByTagsChanged', this.onOrganizationModeChange)\n  }\n\n  onOrganizationModeChange (organizeByTag) {\n    this.setState({\n      organizeByTags: organizeByTag\n    })\n  }\n\n  addItemsByTag (\n    newItems,\n    entitySetsNames,\n    allTagEntities,\n    currentTagEntities,\n    entitiesByTagAndType,\n    entitiesByTypeWithoutTag,\n    getEntityTypeNameAttr\n  ) {\n    const tagsWithNoEntities = []\n\n    allTagEntities.forEach((tag) => {\n      const tagName = getEntityTypeNameAttr(tag.__entitySet, tag)\n      const entitiesByType = entitiesByTagAndType[tagName]\n      const typesInTag = Object.keys(entitiesByType)\n\n      if (\n        typesInTag.length === 0 ||\n        typesInTag.every((type) => entitiesByType[type].length > 0) === false\n      ) {\n        tagsWithNoEntities.push(tag)\n        return\n      }\n\n      let tagItem\n\n      entitySetsNames.forEach((type) => {\n        if (type === 'tags') {\n          return\n        }\n\n        const entities = entitiesByType[type]\n        let typeItem\n\n        if (!tagItem) {\n          tagItem = {\n            name: tagName,\n            isGroup: true,\n            data: tag,\n            items: []\n          }\n\n          newItems.push(tagItem)\n        }\n\n        if (!entities || entities.length === 0) {\n          tagItem.items.push({\n            name: type,\n            isEntitySet: true,\n            items: []\n          })\n\n          return\n        }\n\n        typeItem = {\n          name: type,\n          isEntitySet: true,\n          items: []\n        }\n\n        entities.forEach((entity) => {\n          typeItem.items.push({\n            name: getEntityTypeNameAttr(entity.__entitySet, entity),\n            data: entity\n          })\n        })\n\n        tagItem.items.push(typeItem)\n      })\n    })\n\n    tagsWithNoEntities.forEach((tag) => {\n      const tagItem = {\n        name: getEntityTypeNameAttr(tag.__entitySet, tag),\n        isGroup: true,\n        data: tag,\n        items: []\n      }\n\n      entitySetsNames.forEach((type) => {\n        if (type === 'tags') {\n          return\n        }\n\n        tagItem.items.push({\n          name: type,\n          isEntitySet: true,\n          items: []\n        })\n      })\n\n      newItems.push(tagItem)\n    })\n\n    const noTagsItem = {\n      name: noTagGroupName,\n      isGroup: true,\n      items: []\n    }\n\n    entitySetsNames.forEach((type) => {\n      if (type === 'tags') {\n        return\n      }\n\n      const item = {\n        name: type,\n        isEntitySet: true,\n        items: []\n      }\n\n      const entities = entitiesByTypeWithoutTag[type]\n\n      if (entities) {\n        entities.forEach((entity) => {\n          item.items.push({\n            name: getEntityTypeNameAttr(entity.__entitySet, entity),\n            data: entity\n          })\n        })\n      }\n\n      noTagsItem.items.push(item)\n    })\n\n    newItems.push(noTagsItem)\n\n    const tagsItem = {\n      name: tagsGroupName,\n      isEntitySet: true,\n      items: []\n    }\n\n    if (currentTagEntities) {\n      currentTagEntities.forEach((tag) => {\n        tagsItem.items.push({\n          name: getEntityTypeNameAttr(tag.__entitySet, tag),\n          data: tag\n        })\n      })\n    }\n\n    newItems.push(tagsItem)\n  }\n\n  groupEntityByTagAndType (collection, allTagEntities, entity, getEntityTypeNameAttr) {\n    if (entity.__entitySet === 'tags') {\n      const name = getEntityTypeNameAttr(entity.__entitySet, entity)\n      collection[name] = collection[name] || {}\n    } else if (entity.tags != null) {\n      entity.tags.forEach((tag) => {\n        const tagFound = findTagInSet(allTagEntities, tag.shortid)\n\n        if (tagFound) {\n          const name = getEntityTypeNameAttr(tagFound.__entitySet, tagFound)\n          collection[name] = collection[name] || []\n          collection[name][entity.__entitySet] = collection[name][entity.__entitySet] || []\n          collection[name][entity.__entitySet].push(entity)\n        }\n      })\n    }\n  }\n\n  groupEntitiesByTag (entitySetsNames, entities, getEntityTypeNameAttr) {\n    const newItems = []\n    let allTagEntities = Studio.getReferences().tags || []\n    const entitiesByTagAndType = {}\n    const entitiesByTypeWithoutTag = {}\n\n    // initialize all tag groups based on all tag entities\n    allTagEntities.forEach((entityTag) => {\n      this.groupEntityByTagAndType(entitiesByTagAndType, allTagEntities, entityTag, getEntityTypeNameAttr)\n    })\n\n    entitySetsNames.forEach((entitySetName) => {\n      if (entitySetName === 'tags') {\n        return\n      }\n\n      const entitiesInSet = entities[entitySetName]\n\n      if (!entitiesInSet) {\n        return\n      }\n\n      let entitiesInSetCount = entitiesInSet.length\n\n      for (let j = 0; j < entitiesInSetCount; j++) {\n        const entity = entitiesInSet[j]\n\n        if (entity.tags != null) {\n          this.groupEntityByTagAndType(entitiesByTagAndType, allTagEntities, entity, getEntityTypeNameAttr)\n        } else {\n          entitiesByTypeWithoutTag[entity.__entitySet] = entitiesByTypeWithoutTag[entity.__entitySet] || []\n          entitiesByTypeWithoutTag[entity.__entitySet].push(entity)\n        }\n      }\n    })\n\n    this.addItemsByTag(\n      newItems,\n      entitySetsNames,\n      allTagEntities,\n      entities.tags,\n      entitiesByTagAndType,\n      entitiesByTypeWithoutTag,\n      getEntityTypeNameAttr\n    )\n\n    return newItems\n  }\n\n  render () {\n    const { containerStyles } = this.props\n\n    return (\n      <div style={containerStyles}>\n        {/*\n          extending entity tree's react element to configure\n          custom rendering of items in tree\n        */}\n        {React.cloneElement(this.props.children, {}, ({\n          renderDefaultTree,\n          renderTree,\n          getSetsToRender,\n          getEntityTypeNameAttr,\n          entitySets,\n          entities\n        }) => {\n          const { organizeByTags } = this.state\n\n          if (!organizeByTags) {\n            return renderDefaultTree(entitySets, entities)\n          }\n\n          return renderTree(this.groupEntitiesByTag(getSetsToRender(entitySets), entities, getEntityTypeNameAttr))\n        })}\n      </div>\n    )\n  }\n}\n\nexport default EntityTreeTagOrganizer\n","//      \n// An event handler can take an optional event argument\n// and should not return a value\n                                          \n                                                               \n\n// An array of all currently registered event handlers for a type\n                                            \n                                                            \n// A map of event types and their corresponding event handlers.\n                        \n                                 \n                                   \n  \n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\n *  @name mitt\n *  @returns {Mitt}\n */\nfunction mitt(all                 ) {\n\tall = all || Object.create(null);\n\n\treturn {\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to listen for, or `\"*\"` for all events\n\t\t * @param  {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton: function on(type        , handler              ) {\n\t\t\t(all[type] || (all[type] = [])).push(handler);\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to unregister `handler` from, or `\"*\"`\n\t\t * @param  {Function} handler Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff: function off(type        , handler              ) {\n\t\t\tif (all[type]) {\n\t\t\t\tall[type].splice(all[type].indexOf(handler) >>> 0, 1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `\"*\"` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * @param {String} type  The event type to invoke\n\t\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberOf mitt\n\t\t */\n\t\temit: function emit(type        , evt     ) {\n\t\t\t(all[type] || []).slice().map(function (handler) { handler(evt); });\n\t\t\t(all['*'] || []).slice().map(function (handler) { handler(type, evt); });\n\t\t}\n\t};\n}\n\nexport default mitt;\n//# sourceMappingURL=mitt.es.js.map\n","\r\nconst noTagGroupName = '(objects without tag)'\r\nconst tagsGroupName = 'tags'\r\nconst reservedTagNames = [noTagGroupName, tagsGroupName]\r\n\r\nmodule.exports.default = reservedTagNames\r\nmodule.exports.noTagGroupName = noTagGroupName\r\nmodule.exports.tagsGroupName = tagsGroupName\r\n","import React, { Component } from 'react'\nimport * as organizeState from './organizeState'\nimport emitter from './emitter'\nimport styles from './TagEntityTreeButtonToolbar.scss'\n\nclass TagEntityTreeOrganizeButtonToolbar extends Component {\n  constructor (props) {\n    super(props)\n\n    this.handleOrganizationModeChange = this.handleOrganizationModeChange.bind(this)\n  }\n\n  handleOrganizationModeChange (ev) {\n    ev.stopPropagation()\n\n    // notify parent that the organization mode has changed\n    emitter.emit('organizationModeByTagsChanged', !organizeState.current)\n    this.props.closeMenu()\n  }\n\n  render () {\n    return (\n      <div\n        title='Group and organize entities tree by tag'\n        style={{ display: 'inline-block' }}\n        onClick={this.handleOrganizationModeChange}\n      >\n        <span\n          style={{ display: 'inline-block', marginRight: '0.3rem' }}\n          className={organizeState.current ? styles.active : ''}\n        >\n          <span className='fa fa-tags' />\n        </span>\n        <span style={{ display: 'inline-block' }}>\n          Group by tag\n        </span>\n      </div>\n    )\n  }\n}\n\nexport default TagEntityTreeOrganizeButtonToolbar\n","import React, { Component } from 'react'\nimport Studio, { Popover } from 'jsreport-studio'\nimport * as organizeState from './organizeState'\nimport emitter from './emitter'\nimport TagEntityTreeFilterByTags from './TagEntityTreeFilterByTags'\nimport styles from './TagEntityTreeButtonToolbar.scss'\n\nclass TagEntityTreeFilterButtonToolbar extends Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      showFilter: false,\n      selectedTags: organizeState.filterTags || []\n    }\n\n    this.openFilter = this.openFilter.bind(this)\n    this.closeFilter = this.closeFilter.bind(this)\n    this.handleTagSelectChange = this.handleTagSelectChange.bind(this)\n  }\n\n  openFilter (ev) {\n    ev.stopPropagation()\n    this.setState({ showFilter: true })\n  }\n\n  closeFilter () {\n    this.setState({ showFilter: false })\n    this.props.closeMenu()\n  }\n\n  handleTagSelectChange (selectedTags) {\n    const { setFilter } = this.props\n\n    setFilter({\n      tags: selectedTags\n    })\n\n    this.setState({\n      selectedTags\n    }, () => {\n      emitter.emit('filterByTagsChanged', selectedTags)\n    })\n  }\n\n  render () {\n    const { showFilter, selectedTags } = this.state\n    const allTags = Studio.getReferences().tags\n    const isActive = selectedTags.length > 0\n\n    return (\n      <div\n        title='Filter entities tree by tag'\n        style={{ display: 'inline-block' }}\n        onClick={this.openFilter}\n      >\n        <span style={{ display: 'inline-block' }}>\n          <span\n            style={{ display: 'inline-block', marginRight: '0.3rem' }}\n            className={isActive ? styles.active : ''}\n          >\n            <span className='fa fa-filter' />\n            &nbsp;\n            <span className='fa fa-tag' />\n          </span>\n          <span style={{ display: 'inline-block' }}>\n            Filter by tag\n          </span>\n        </span>\n        <Popover\n          open={showFilter}\n          onClose={this.closeFilter}\n        >\n          <TagEntityTreeFilterByTags\n            tags={allTags}\n            selectedTags={selectedTags}\n            onTagSelectChange={this.handleTagSelectChange}\n            onFilterClose={this.closeFilter}\n          />\n        </Popover>\n      </div>\n    )\n  }\n}\n\nexport default TagEntityTreeFilterButtonToolbar\n","import PropTypes from 'prop-types'\nimport React, { Component } from 'react'\nimport ReactList from 'react-list'\nimport colorLuminance from './colorLuminance'\nimport getColorLuminance from './getColorLuminance'\nimport ShowColor from './ShowColor'\nimport style from './TagEntityTreeFilterByTags.scss'\n\nclass TagEntityTreeFilterByTags extends Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      showTagsList: true,\n      filterText: ''\n    }\n\n    this.createRenderer = this.createRenderer.bind(this)\n    this.addSelectedTag = this.addSelectedTag.bind(this)\n    this.onTagSelectionClick = this.onTagSelectionClick.bind(this)\n    this.onChangeInputTag = this.onChangeInputTag.bind(this)\n    this.onKeyDownInputTag = this.onKeyDownInputTag.bind(this)\n    this.onRemoveTagItem = this.onRemoveTagItem.bind(this)\n  }\n\n  componentDidMount () {\n    this.focus()\n  }\n\n  createRenderer (tags) {\n    return (index, key) => this.renderTagItem(tags[index])\n  }\n\n  addSelectedTag (tag) {\n    const previousSelectedTags = this.props.selectedTags\n\n    const selectedTags = [\n      ...previousSelectedTags,\n      tag\n    ]\n\n    this.props.onTagSelectChange(selectedTags)\n    this.focus()\n  }\n\n  focus () {\n    if (this.refs.tagSelectionInput && typeof this.refs.tagSelectionInput.focus === 'function') {\n      this.refs.tagSelectionInput.focus()\n    }\n  }\n\n  getTagsToShow (allTags, selectedTags, filterText) {\n    if (selectedTags.length === 0 && filterText === '') {\n      return allTags\n    }\n\n    return allTags.filter((tag) => {\n      let filterPass = true\n\n      if (filterText !== '') {\n        filterPass = tag.name.indexOf(filterText) !== -1\n      }\n\n      if (!filterPass) {\n        return false\n      }\n\n      const foundInSelectedTags = selectedTags.some((selectTag) => {\n        return selectTag.shortid === tag.shortid\n      })\n\n      return !foundInSelectedTags\n    })\n  }\n\n  onTagSelectionClick (ev) {\n    // if the tag selection area is directly clicked\n    // focus the input\n    if (ev.target === this.refs.tagSelection) {\n      this.focus()\n    }\n  }\n\n  onChangeInputTag (ev) {\n    this.setState({\n      filterText: ev.target.value\n    })\n  }\n\n  onKeyDownInputTag (ev) {\n    if (ev.defaultPrevented) {\n      return\n    }\n\n    let keyCode = ev.keyCode\n    let inputTag = ev.target\n    let remove = false\n    let enterKey = 13\n    let removeKey = 8\n\n    if (keyCode === enterKey) {\n      ev.preventDefault()\n\n      return this.props.onFilterClose()\n    }\n\n    if (keyCode === removeKey) {\n      remove = true\n    }\n\n    if (remove && inputTag.value === '') {\n      let selectedTags = this.props.selectedTags\n      let selectedTagsLastIndex = selectedTags.length - 1\n\n      ev.preventDefault()\n\n      if (selectedTagsLastIndex >= 0) {\n        this.onRemoveTagItem(selectedTags[selectedTagsLastIndex], selectedTagsLastIndex)\n      }\n    }\n  }\n\n  onRemoveTagItem (tag, tagIndex) {\n    const originalSelectedTags = this.props.selectedTags\n\n    const selectedTags = [\n      ...originalSelectedTags.slice(0, tagIndex),\n      ...originalSelectedTags.slice(tagIndex + 1)\n    ]\n\n    this.props.onTagSelectChange(selectedTags)\n  }\n\n  renderTagItem (tag) {\n    return (\n      <div\n        key={tag.shortid}\n        className={style.tagsListItem}\n        onClick={() => this.addSelectedTag(tag)}\n      >\n        <ShowColor color={tag.color} />\n        &nbsp;\n        <span>{tag.name}</span>\n      </div>\n    )\n  }\n\n  render () {\n    const { showTagsList, filterText } = this.state\n    const { tags, selectedTags } = this.props\n    const tagsToShowInList = this.getTagsToShow(tags, selectedTags, filterText)\n\n    let stylesForTagsList = {}\n    let stylesForInputTag = {}\n\n    if (showTagsList) {\n      stylesForTagsList.display = 'block'\n    } else {\n      stylesForTagsList.display = 'none'\n    }\n\n    if (selectedTags.length === 0) {\n      stylesForInputTag.width = '100%'\n    }\n\n    return (\n      <div className={style.searchTagsContainer}>\n        <div className={style.searchTagsInputBox}>\n          <div ref='tagSelection' className={style.tagsSelect} onClick={this.onTagSelectionClick}>\n            <span>\n              {selectedTags.map((tag, tagIndex) => {\n                const tagStyles = {\n                  backgroundColor: tag.color,\n                  borderColor: colorLuminance(tag.color, -0.35),\n                  color: getColorLuminance(tag.color) >= 0.5 ? '#000' : '#fff'\n                }\n\n                return (\n                  <span key={tag.shortid} className={style.tagsSelectItem} style={tagStyles}>\n                    {tag.name}\n                    <a className={style.tagsSelectItemRemove} onClick={() => this.onRemoveTagItem(tag, tagIndex)} />\n                  </span>\n                )\n              })}\n              <input\n                ref='tagSelectionInput'\n                type='text'\n                placeholder={selectedTags.length === 0 ? 'select a tag' : ''}\n                className={style.searchTags}\n                style={stylesForInputTag}\n                onChange={this.onChangeInputTag}\n                onKeyDown={this.onKeyDownInputTag}\n              />\n            </span>\n          </div>\n        </div>\n        <div\n          ref='tagList'\n          className={style.tagsListContainer}\n          style={stylesForTagsList}\n        >\n          <div className={style.tagsList}>\n            {tags.length === 0 ? (\n              <div className={style.tagsListEmpty}>\n                No tags registered\n              </div>\n            ) : (\n              <ReactList\n                itemRenderer={this.createRenderer(tagsToShowInList)}\n                length={tagsToShowInList.length}\n              />\n            )}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nTagEntityTreeFilterByTags.defaultProps = {\n  onTagSelectChange: () => {}\n}\n\nTagEntityTreeFilterByTags.propTypes = {\n  tags: PropTypes.arrayOf(PropTypes.shape({\n    shortid: PropTypes.string,\n    name: PropTypes.string,\n    color: PropTypes.string\n  })),\n  selectedTags: PropTypes.arrayOf(PropTypes.shape({\n    shortid: PropTypes.string,\n    name: PropTypes.string,\n    color: PropTypes.string\n  })),\n  onTagSelectChange: PropTypes.func,\n  onFilterClose: PropTypes.func\n}\n\nexport default TagEntityTreeFilterByTags\n","module.exports = Studio.libraries['react-list'];","import hexToRgb from './hexToRgb'\n\nexport default (hex) => {\n  const rgb = hexToRgb(hex)\n\n  let RsRGB, GsRGB, BsRGB, R, G, B\n\n  RsRGB = rgb.r / 255\n  GsRGB = rgb.g / 255\n  BsRGB = rgb.b / 255\n\n  if (RsRGB <= 0.03928) {\n    R = RsRGB / 12.92\n  } else {\n    R = Math.pow(((RsRGB + 0.055) / 1.055), 2.4)\n  }\n\n  if (GsRGB <= 0.03928) {\n    G = GsRGB / 12.92\n  } else {\n    G = Math.pow(((GsRGB + 0.055) / 1.055), 2.4)\n  }\n\n  if (BsRGB <= 0.03928) {\n    B = BsRGB / 12.92\n  } else {\n    B = Math.pow(((BsRGB + 0.055) / 1.055), 2.4)\n  }\n\n  return (0.2126 * R) + (0.7152 * G) + (0.0722 * B)\n}\n","\nconst shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i\n\nexport default (hex) => {\n  // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n  let fullHex = hex.replace(shorthandRegex, function (m, r, g, b) {\n    return r + r + g + g + b + b\n  })\n\n  let result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(fullHex)\n\n  return result ? {\n    r: parseInt(result[1], 16),\n    g: parseInt(result[2], 16),\n    b: parseInt(result[3], 16)\n  } : null\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchTagsContainer\":\"x-tags-TagEntityTreeFilterByTags-searchTagsContainer\",\"searchTagsInputBox\":\"x-tags-TagEntityTreeFilterByTags-searchTagsInputBox\",\"searchTags\":\"x-tags-TagEntityTreeFilterByTags-searchTags\",\"tagsListContainer\":\"x-tags-TagEntityTreeFilterByTags-tagsListContainer\",\"tagsList\":\"x-tags-TagEntityTreeFilterByTags-tagsList\",\"tagsListEmpty\":\"x-tags-TagEntityTreeFilterByTags-tagsListEmpty\",\"tagsListItem\":\"x-tags-TagEntityTreeFilterByTags-tagsListItem\",\"tagsSelect\":\"x-tags-TagEntityTreeFilterByTags-tagsSelect\",\"tagsSelectItem\":\"x-tags-TagEntityTreeFilterByTags-tagsSelectItem\",\"tagsSelectItemRemove\":\"x-tags-TagEntityTreeFilterByTags-tagsSelectItemRemove\"};","import React, { Component } from 'react'\nimport ShowColor from './ShowColor'\nimport findTagInSet from './findTagInSet'\n\nclass TagEntityTreeItem extends Component {\n  render () {\n    const { entity, entities } = this.props\n    let tags = entity.tags || []\n\n    // for tags, display the color right in the entity tree\n    if (entity.__entitySet === 'tags') {\n      tags = [entity]\n    }\n\n    const tagsLength = tags.length\n\n    return (\n      <div style={{ display: 'inline-block', marginLeft: '0.2rem', marginRight: '0.2rem' }}>\n        {tags.map((tag, tagIndex) => {\n          const tagFound = findTagInSet(entities.tags, tag.shortid) || {}\n\n          return (\n            <span key={tag.shortid} title={tagFound.name}>\n              <ShowColor color={tagFound.color} width={8} height={15} />\n              {(tagIndex !== tagsLength - 1) ? ' ' : null}\n            </span>\n          )\n        })}\n      </div>\n    )\n  }\n}\n\nexport default TagEntityTreeItem\n","import React, { Component } from 'react'\nimport Studio from 'jsreport-studio'\nimport ShowColor from './ShowColor'\nimport findTagInSet from './findTagInSet'\n\nclass TagEntityTreeTagGroupItem extends Component {\n  render () {\n    const { __entitySet } = this.props\n\n    if (__entitySet !== 'tags' && __entitySet !== 'folders') {\n      return null\n    }\n\n    let tags = []\n\n    if (__entitySet === 'tags') {\n      tags.push({ name: this.props.name, shortid: this.props.shortid, color: this.props.color })\n    } else {\n      tags = this.props.tags || []\n\n      tags = tags.map((t) => {\n        return findTagInSet(Studio.getReferences().tags, t.shortid)\n      })\n    }\n\n    const tagsLength = tags.length\n\n    return (\n      <div style={{ display: 'inline-block', marginLeft: '0.2rem', marginRight: '0.2rem' }}>\n        {tags.map((tag, tagIndex) => {\n          if (!tag) {\n            return\n          }\n\n          return (\n            <span key={tag.shortid} title={tag.name}>\n              <ShowColor color={tag.color} width={8} height={15} />\n              {(tagIndex !== tagsLength - 1) ? ' ' : null}\n            </span>\n          )\n        })}\n      </div>\n    )\n  }\n}\n\nexport default TagEntityTreeTagGroupItem\n","\nexport default (entity, entitySets, filterInfo) => {\n  const { tags } = filterInfo\n  const allTagsInEntity = entity.tags || []\n\n  if (tags == null) {\n    return true\n  }\n\n  if (tags.length > 0) {\n    return tags.every((tag) => {\n      return allTagsInEntity.some((tagInEntity) => tagInEntity.shortid === tag.shortid)\n    })\n  }\n\n  return true\n}\n"],"sourceRoot":""}